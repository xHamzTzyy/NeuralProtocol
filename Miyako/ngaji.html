<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mushaf — Al-Quran Digital</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;700&family=Cinzel:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* ═══════════════════════════════════════════
   DESIGN TOKENS
═══════════════════════════════════════════ */
:root {
  --night: #080e14;
  --navy: #0d1821;
  --navy-2: #142030;
  --navy-3: #1c2d42;
  --navy-4: #243650;
  --gold: #c9a84c;
  --gold-light: #e8cc7a;
  --gold-dim: rgba(201,168,76,0.15);
  --emerald: #1a6b4a;
  --emerald-light: #25a06e;
  --emerald-glow: rgba(26,107,74,0.25);
  --cream: #f5f0e8;
  --cream-dim: rgba(245,240,232,0.7);
  --cream-muted: rgba(245,240,232,0.35);
  --white: #ffffff;
  --red: #c0392b;
  --border: rgba(201,168,76,0.18);
  --border-subtle: rgba(245,240,232,0.08);
  --shadow-gold: 0 8px 32px rgba(201,168,76,0.12);
  --shadow-deep: 0 20px 60px rgba(0,0,0,0.6);
  --radius: 16px;
  --radius-sm: 10px;
  --radius-xs: 6px;
  --font-arabic: 'Scheherazade New', serif;
  --font-heading: 'Cinzel', serif;
  --font-body: 'DM Sans', sans-serif;
  --font-arabic-alt: 'Amiri', serif;
}

[data-theme="light"] {
  --night: #f0ebe0;
  --navy: #faf6ee;
  --navy-2: #f0ead8;
  --navy-3: #e8dfc8;
  --navy-4: #ddd3b8;
  --cream: #2c1e0f;
  --cream-dim: rgba(44,30,15,0.7);
  --cream-muted: rgba(44,30,15,0.35);
  --border: rgba(180,140,60,0.25);
  --border-subtle: rgba(44,30,15,0.1);
  --shadow-deep: 0 20px 60px rgba(0,0,0,0.12);
}

/* ═══════════════════════════════════════════
   RESET & BASE
═══════════════════════════════════════════ */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; font-size:16px; }
body {
  font-family: var(--font-body);
  background: var(--night);
  color: var(--cream);
  overflow-x: hidden;
  min-height: 100vh;
  transition: background 0.4s, color 0.4s;
}

::-webkit-scrollbar { width:5px; }
::-webkit-scrollbar-track { background: var(--navy); }
::-webkit-scrollbar-thumb { background: var(--gold); border-radius:10px; }

/* ═══════════════════════════════════════════
   GEOMETRIC BACKGROUND PATTERN
═══════════════════════════════════════════ */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image:
    repeating-linear-gradient(60deg, transparent, transparent 40px, rgba(201,168,76,0.025) 40px, rgba(201,168,76,0.025) 41px),
    repeating-linear-gradient(-60deg, transparent, transparent 40px, rgba(201,168,76,0.025) 40px, rgba(201,168,76,0.025) 41px),
    repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(201,168,76,0.015) 40px, rgba(201,168,76,0.015) 41px);
  pointer-events: none;
  z-index: 0;
}

/* ═══════════════════════════════════════════
   READING PROGRESS
═══════════════════════════════════════════ */
.reading-bar {
  position: fixed;
  top: 0; left: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--emerald-light), var(--gold));
  z-index: 9999;
  width: 0%;
  transition: width 0.15s;
  box-shadow: 0 0 8px var(--gold);
}

/* ═══════════════════════════════════════════
   HEADER
═══════════════════════════════════════════ */
.header {
  position: sticky;
  top: 0;
  z-index: 500;
  background: rgba(8,14,20,0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  padding: 0 2rem;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

[data-theme="light"] .header { background: rgba(250,246,238,0.9); }

.logo {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  text-decoration: none;
  cursor: pointer;
}
.logo-icon {
  width: 36px;
  height: 36px;
  background: linear-gradient(135deg, var(--emerald), var(--emerald-light));
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  color: white;
  box-shadow: 0 4px 12px var(--emerald-glow);
}
.logo-text {
  font-family: var(--font-heading);
  font-size: 1.15rem;
  font-weight: 600;
  color: var(--cream);
  letter-spacing: 0.04em;
}
.logo-sub {
  font-size: 0.65rem;
  color: var(--gold);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  display: block;
  line-height: 1;
}

.header-center {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.hijri-pill {
  font-size: 0.75rem;
  color: var(--gold);
  background: var(--gold-dim);
  border: 1px solid var(--border);
  padding: 0.3rem 0.9rem;
  border-radius: 20px;
  letter-spacing: 0.03em;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.hbtn {
  position: relative;
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: 1px solid var(--border-subtle);
  background: var(--navy-2);
  color: var(--cream-dim);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  transition: all 0.2s;
}
.hbtn:hover { background: var(--navy-3); color: var(--cream); border-color: var(--border); }
.hbtn .dot {
  position: absolute;
  top: 5px; right: 5px;
  width: 7px; height: 7px;
  border-radius: 50%;
  background: var(--gold);
  border: 1.5px solid var(--night);
  display: none;
}
.hbtn .dot.show { display: block; }

/* ═══════════════════════════════════════════
   SEARCH BAR
═══════════════════════════════════════════ */
.search-wrap {
  position: sticky;
  top: 64px;
  z-index: 400;
  background: rgba(8,14,20,0.7);
  backdrop-filter: blur(12px);
  padding: 0.75rem 2rem;
  border-bottom: 1px solid var(--border-subtle);
}
[data-theme="light"] .search-wrap { background: rgba(250,246,238,0.85); }
.search-inner {
  max-width: 1100px;
  margin: 0 auto;
  position: relative;
}
.search-input {
  width: 100%;
  padding: 0.65rem 1rem 0.65rem 2.5rem;
  background: var(--navy-2);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  color: var(--cream);
  font-family: var(--font-body);
  font-size: 0.9rem;
  outline: none;
  transition: all 0.25s;
}
.search-input::placeholder { color: var(--cream-muted); }
.search-input:focus { border-color: var(--border); background: var(--navy-3); }
.search-ico { position:absolute; left:0.8rem; top:50%; transform:translateY(-50%); color:var(--cream-muted); font-size:0.85rem; pointer-events:none; }
.search-x { position:absolute; right:0.8rem; top:50%; transform:translateY(-50%); background:none; border:none; color:var(--cream-muted); cursor:pointer; display:none; font-size:0.85rem; }

/* ═══════════════════════════════════════════
   MAIN LAYOUT
═══════════════════════════════════════════ */
.main { max-width: 1100px; margin: 0 auto; padding: 1.5rem 2rem 6rem; position: relative; z-index: 1; }

/* ═══════════════════════════════════════════
   HERO / STATS STRIP
═══════════════════════════════════════════ */
.hero-strip {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1.5rem;
}
.stat-card {
  background: var(--navy-2);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius);
  padding: 1.1rem 1.2rem;
  transition: border-color 0.2s;
  cursor: default;
  position: relative;
  overflow: hidden;
}
.stat-card::after {
  content:'';
  position:absolute;
  bottom:0; left:0; right:0;
  height:2px;
  background: linear-gradient(90deg, var(--emerald), var(--gold));
  transform: scaleX(0);
  transition: transform 0.3s;
  transform-origin: left;
}
.stat-card:hover::after { transform: scaleX(1); }
.stat-card:hover { border-color: var(--border); }
.stat-label { font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em; color:var(--cream-muted); margin-bottom:0.3rem; }
.stat-value { font-family: var(--font-heading); font-size:1.4rem; color:var(--gold); font-weight:600; }
.stat-sub { font-size:0.75rem; color:var(--cream-dim); margin-top:0.1rem; }

/* ═══════════════════════════════════════════
   LAST READ BANNER
═══════════════════════════════════════════ */
.resume-card {
  background: linear-gradient(135deg, var(--emerald) 0%, #0d3d28 100%);
  border: 1px solid rgba(37,160,110,0.4);
  border-radius: var(--radius);
  padding: 1.2rem 1.5rem;
  margin-bottom: 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 4px 20px var(--emerald-glow);
}
.resume-card:hover { transform: translateY(-2px); box-shadow: 0 8px 30px var(--emerald-glow); }
.resume-card.hidden { display: none; }
.resume-left { display:flex; align-items:center; gap:1rem; }
.resume-icon { font-size:1.8rem; }
.resume-label { font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em; opacity:0.75; }
.resume-name { font-weight:600; font-size:1rem; }
.resume-btn {
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.2);
  color: white;
  padding: 0.5rem 1.2rem;
  border-radius: 20px;
  font-family: var(--font-body);
  font-size:0.82rem;
  font-weight:600;
  cursor:pointer;
  white-space:nowrap;
  transition:0.2s;
}
.resume-btn:hover { background:rgba(255,255,255,0.25); }

/* ═══════════════════════════════════════════
   PRAYER ALERT BANNER
═══════════════════════════════════════════ */
.prayer-alert-banner {
  background: linear-gradient(135deg, #7c4a00, #5c3500);
  border: 1px solid rgba(201,168,76,0.35);
  border-radius: var(--radius);
  padding: 1rem 1.5rem;
  margin-bottom: 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  animation: pulse-gold 2s infinite;
}
.prayer-alert-banner.hidden { display:none; }
@keyframes pulse-gold {
  0%,100% { box-shadow: 0 0 0 0 rgba(201,168,76,0.15); }
  50% { box-shadow: 0 0 0 8px rgba(201,168,76,0); }
}
.prayer-alert-left { display:flex; align-items:center; gap:1rem; }
.prayer-bell { font-size:1.5rem; animation:ringBell 1.2s infinite; }
@keyframes ringBell { 0%,100%{transform:rotate(0)} 25%{transform:rotate(-15deg)} 75%{transform:rotate(15deg)} }
.prayer-alert-name { font-weight:700; color:var(--gold-light); }
.prayer-alert-time { font-size:0.82rem; opacity:0.8; }
.btn-dismiss { background:none; border:1px solid rgba(255,255,255,0.2); color:var(--cream); padding:0.35rem 0.9rem; border-radius:20px; cursor:pointer; font-size:0.8rem; font-family:var(--font-body); transition:0.2s; }
.btn-dismiss:hover { background:rgba(255,255,255,0.1); }

/* ═══════════════════════════════════════════
   SECTION HEADERS
═══════════════════════════════════════════ */
.section-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}
.section-title {
  font-family: var(--font-heading);
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--gold);
}
.section-action {
  background: none;
  border: 1px solid var(--border-subtle);
  color: var(--cream-dim);
  padding: 0.35rem 0.9rem;
  border-radius: 20px;
  font-family: var(--font-body);
  font-size: 0.78rem;
  cursor: pointer;
  transition: 0.2s;
  display: none;
}
.section-action:hover { border-color: var(--border); color: var(--cream); }
.section-action.show { display: block; }

/* ═══════════════════════════════════════════
   JUZ GRID
═══════════════════════════════════════════ */
.juz-section { margin-bottom: 1.5rem; }
.juz-grid {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  gap: 0.5rem;
}
.juz-btn {
  background: var(--navy-2);
  border: 1px solid var(--border-subtle);
  color: var(--cream-dim);
  padding: 0.5rem 0.2rem;
  border-radius: var(--radius-xs);
  cursor: pointer;
  font-family: var(--font-body);
  font-size: 0.72rem;
  font-weight: 500;
  text-align: center;
  transition: all 0.2s;
  line-height: 1.2;
}
.juz-btn:hover { background: var(--navy-3); color: var(--cream); border-color: var(--border); }
.juz-btn.active { background: var(--emerald); border-color: var(--emerald-light); color: white; }
.juz-num { font-family: var(--font-heading); font-size: 0.85rem; display: block; color: inherit; }

/* ═══════════════════════════════════════════
   SURAH LIST
═══════════════════════════════════════════ */
.surah-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.6rem;
}
.surah-card {
  background: var(--navy-2);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius);
  padding: 1rem 1.2rem;
  cursor: pointer;
  transition: all 0.22s;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.8rem;
  position: relative;
  overflow: hidden;
}
.surah-card::before {
  content:'';
  position:absolute;
  inset:0;
  background: linear-gradient(135deg, var(--emerald-glow), transparent);
  opacity:0;
  transition:opacity 0.25s;
}
.surah-card:hover::before { opacity:1; }
.surah-card:hover { border-color: var(--border); transform: translateY(-1px); box-shadow: var(--shadow-gold); }
.surah-card.has-bookmark { border-left: 2px solid var(--gold); }
.surah-left { display:flex; align-items:center; gap:0.9rem; position:relative; z-index:1; }
.surah-num {
  width: 36px; height: 36px;
  background: var(--night);
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  display: flex; align-items:center; justify-content:center;
  font-family: var(--font-heading);
  font-size: 0.78rem;
  color: var(--gold);
  flex-shrink:0;
}
.surah-name { font-size:0.92rem; font-weight:600; color:var(--cream); margin-bottom:0.15rem; }
.surah-meta { font-size:0.72rem; color:var(--cream-muted); }
.surah-right { text-align:right; flex-shrink:0; position:relative; z-index:1; }
.surah-arabic-name { font-family: var(--font-arabic); font-size:1.3rem; color:var(--gold-light); line-height:1.4; }
.surah-type { font-size:0.65rem; color:var(--cream-muted); text-transform:uppercase; letter-spacing:0.06em; }

/* ═══════════════════════════════════════════
   AYAH VIEW
═══════════════════════════════════════════ */
.ayah-view { display:none; }
.ayah-view.active { display:block; }

.surah-hero {
  background: linear-gradient(135deg, var(--navy-3) 0%, var(--navy-2) 100%);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 2rem;
  text-align: center;
  margin-bottom: 1.5rem;
  position: relative;
  overflow: hidden;
}
.surah-hero::before {
  content: attr(data-arabic);
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-family: var(--font-arabic);
  font-size: 8rem;
  color: rgba(201,168,76,0.04);
  pointer-events:none;
  white-space:nowrap;
}
.hero-arabic { font-family: var(--font-arabic); font-size: 2.4rem; color: var(--gold-light); margin-bottom: 0.5rem; }
.hero-name { font-family: var(--font-heading); font-size: 1.5rem; color: var(--cream); margin-bottom: 0.3rem; }
.hero-meta { font-size: 0.82rem; color: var(--cream-muted); }
.hero-pills { display:flex; justify-content:center; gap:0.5rem; margin-top:0.8rem; flex-wrap:wrap; }
.pill {
  padding: 0.25rem 0.8rem;
  border-radius: 20px;
  font-size: 0.7rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}
.pill-green { background: var(--emerald-glow); border: 1px solid rgba(37,160,110,0.3); color: var(--emerald-light); }
.pill-gold { background: var(--gold-dim); border: 1px solid var(--border); color: var(--gold); }

.bismillah-block {
  text-align: center;
  font-family: var(--font-arabic);
  font-size: 1.9rem;
  color: var(--cream-dim);
  padding: 1.2rem;
  margin-bottom: 1.5rem;
  background: var(--navy-2);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius);
  letter-spacing: 0.05em;
}

/* AYAH CARD */
.ayah-card {
  background: var(--navy-2);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius);
  padding: 1.5rem;
  margin-bottom: 1rem;
  transition: all 0.25s;
  position: relative;
}
.ayah-card:hover { border-color: var(--border); }
.ayah-card.active-play {
  border-color: var(--emerald-light);
  box-shadow: 0 0 0 1px var(--emerald-light), 0 8px 25px var(--emerald-glow);
}
.ayah-card.bookmarked { border-left: 3px solid var(--gold); }

.ayah-topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.2rem;
}
.ayah-num-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px; height: 32px;
  background: var(--night);
  border: 1px solid var(--border-subtle);
  border-radius: 8px;
  font-family: var(--font-heading);
  font-size: 0.78rem;
  color: var(--gold);
}
.ayah-quick { display:flex; gap:0.4rem; }
.qbtn {
  width: 30px; height: 30px;
  border-radius: var(--radius-xs);
  border: 1px solid var(--border-subtle);
  background: var(--night);
  color: var(--cream-muted);
  cursor: pointer;
  display: flex; align-items:center; justify-content:center;
  font-size: 0.78rem;
  transition: all 0.18s;
}
.qbtn:hover { background: var(--navy-3); color: var(--cream); border-color: var(--border); }
.qbtn.gold { color: var(--gold); border-color: var(--gold); }

/* Arabic text */
.arabic-text {
  font-family: var(--font-arabic);
  font-size: 2rem;
  line-height: 2.8;
  text-align: right;
  direction: rtl;
  color: var(--cream);
  margin-bottom: 1rem;
  transition: filter 0.3s;
}
.arabic-text.blur { filter: blur(10px); cursor: pointer; }
.arabic-text.blur:hover { filter: blur(5px); }

/* Word by word */
.word-wrap {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  justify-content: flex-end;
  direction: rtl;
  margin-bottom: 1rem;
  display: none;
}
.word-wrap.show { display: flex; }
.word-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.2rem;
  padding: 0.5rem 0.7rem;
  border-radius: 8px;
  background: var(--night);
  border: 1px solid var(--border-subtle);
  cursor: pointer;
  transition: all 0.18s;
  position: relative;
}
.word-item:hover { border-color: var(--gold); background: var(--navy-3); }
.word-item .w-arab { font-family: var(--font-arabic); font-size: 1.4rem; color: var(--cream); line-height: 1.4; direction: rtl; }
.word-item .w-trans { font-size: 0.62rem; color: var(--gold); text-align: center; max-width: 80px; }
.word-item .w-tooltip {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%; transform: translateX(-50%);
  background: var(--navy-4);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 0.4rem 0.7rem;
  font-size: 0.72rem;
  color: var(--cream);
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s;
  z-index: 100;
}
.word-item:hover .w-tooltip { opacity: 1; }

/* Translation */
.translation-block {
  font-size: 0.9rem;
  color: var(--cream-dim);
  line-height: 1.8;
  padding: 0.9rem 1rem;
  background: var(--night);
  border-radius: var(--radius-xs);
  border-left: 2px solid var(--emerald);
  display: none;
  margin-bottom: 0.6rem;
}
.translation-block.show { display: block; }

/* Tafsir */
.tafsir-block {
  font-size: 0.82rem;
  color: var(--cream-muted);
  line-height: 1.9;
  padding: 0.9rem 1rem;
  background: var(--night);
  border-radius: var(--radius-xs);
  border-left: 2px solid var(--gold);
  display: none;
  font-style: italic;
  margin-bottom: 0.6rem;
}
.tafsir-block.show { display: block; }

/* Tajwid highlight */
.tajwid-ikhfa { color: #74b9ff; }
.tajwid-ghunnah { color: #fd79a8; }
.tajwid-mad { color: #55efc4; }
.tajwid-qalqalah { background: rgba(108,92,231,0.25); border-radius: 3px; padding: 0 1px; }
.tajwid-idgham { color: #fdcb6e; }

.ayah-footer {
  display: flex;
  gap: 0.5rem;
  margin-top: 1rem;
  flex-wrap: wrap;
}
.abtn {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.4rem 0.9rem;
  border-radius: var(--radius-xs);
  border: 1px solid var(--border-subtle);
  background: var(--night);
  color: var(--cream-dim);
  font-family: var(--font-body);
  font-size: 0.78rem;
  cursor: pointer;
  transition: all 0.2s;
}
.abtn:hover { border-color: var(--border); color: var(--cream); }
.abtn.primary { background: var(--emerald); border-color: var(--emerald-light); color: white; }
.abtn.primary:hover { background: var(--emerald-light); }

/* BACK BUTTON */
.back-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.6rem;
  padding: 0.65rem 1.3rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-subtle);
  background: var(--navy-2);
  color: var(--cream-dim);
  font-family: var(--font-body);
  font-size: 0.85rem;
  cursor: pointer;
  margin-bottom: 1.5rem;
  transition: all 0.2s;
}
.back-btn:hover { border-color: var(--border); color: var(--cream); transform: translateX(-3px); }

/* ═══════════════════════════════════════════
   BOTTOM NAV (mobile-style tabs)
═══════════════════════════════════════════ */
.bottom-nav {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: rgba(8,14,20,0.95);
  backdrop-filter: blur(20px);
  border-top: 1px solid var(--border-subtle);
  display: flex;
  z-index: 400;
  padding-bottom: env(safe-area-inset-bottom);
}
[data-theme="light"] .bottom-nav { background: rgba(250,246,238,0.95); }
.bnav-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.2rem;
  padding: 0.6rem 0;
  cursor: pointer;
  color: var(--cream-muted);
  font-size: 0.62rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  transition: color 0.2s;
  border: none;
  background: none;
  font-family: var(--font-body);
  position: relative;
}
.bnav-item i { font-size: 1rem; }
.bnav-item:hover, .bnav-item.active { color: var(--emerald-light); }
.bnav-item .bnav-dot {
  position: absolute;
  top: 6px; right: calc(50% - 14px);
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--gold);
  display: none;
}
.bnav-item .bnav-dot.show { display: block; }

/* ═══════════════════════════════════════════
   MODALS
═══════════════════════════════════════════ */
.overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  z-index: 800;
  backdrop-filter: blur(6px);
  align-items: flex-end;
  justify-content: center;
  padding: 1rem;
}
.overlay.active { display: flex; }
.overlay.center { align-items: center; }

.sheet {
  background: var(--navy);
  border: 1px solid var(--border);
  border-radius: 20px 20px 0 0;
  width: 100%;
  max-width: 600px;
  max-height: 85vh;
  overflow-y: auto;
  padding: 1.5rem;
  animation: slideUp 0.3s ease;
}
.overlay.center .sheet { border-radius: 20px; }
@keyframes slideUp { from { transform: translateY(40px); opacity:0; } to { transform: translateY(0); opacity:1; } }
.sheet-handle { width:40px; height:4px; background:var(--border); border-radius:2px; margin:0 auto 1.2rem; }
.sheet-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1.3rem; }
.sheet-title { font-family:var(--font-heading); font-size:1rem; letter-spacing:0.05em; color:var(--gold); }
.sheet-close { width:30px; height:30px; border-radius:8px; border:1px solid var(--border-subtle); background:var(--navy-2); color:var(--cream-muted); cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:0.85rem; transition:0.2s; }
.sheet-close:hover { color:var(--cream); }

/* Settings rows */
.setting-row { display:flex; justify-content:space-between; align-items:center; padding:0.85rem 1rem; background:var(--navy-2); border:1px solid var(--border-subtle); border-radius:var(--radius-sm); margin-bottom:0.5rem; }
.setting-label { font-size:0.88rem; color:var(--cream-dim); }
.setting-sub { font-size:0.72rem; color:var(--cream-muted); margin-top:0.1rem; }
.toggle {
  width: 44px; height: 24px;
  background: var(--navy-3);
  border-radius: 12px;
  cursor: pointer;
  position: relative;
  transition: background 0.25s;
  flex-shrink:0;
  border: 1px solid var(--border-subtle);
}
.toggle.on { background: var(--emerald); border-color: var(--emerald-light); }
.toggle::after {
  content:'';
  position:absolute;
  top:2px; left:2px;
  width:18px; height:18px;
  border-radius:50%;
  background: white;
  transition: transform 0.25s;
  box-shadow: 0 1px 4px rgba(0,0,0,0.3);
}
.toggle.on::after { transform: translateX(20px); }

.range-wrap { width:100%; }
.range-label { display:flex; justify-content:space-between; font-size:0.78rem; color:var(--cream-muted); margin-bottom:0.5rem; }
input[type=range] { width:100%; height:4px; background:var(--navy-3); border-radius:2px; outline:none; -webkit-appearance:none; cursor:pointer; }
input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; width:16px; height:16px; border-radius:50%; background:var(--gold); cursor:pointer; }

.theme-pills { display:flex; gap:0.5rem; flex-wrap:wrap; margin-top:0.5rem; }
.theme-pill {
  padding:0.4rem 1rem;
  border-radius:20px;
  border:1px solid var(--border-subtle);
  background:var(--navy-2);
  color:var(--cream-dim);
  font-size:0.78rem;
  cursor:pointer;
  transition:0.2s;
  font-family:var(--font-body);
}
.theme-pill:hover { border-color:var(--border); color:var(--cream); }
.theme-pill.active { background:var(--emerald); border-color:var(--emerald-light); color:white; }

select.sty {
  width:100%;
  padding:0.6rem 0.9rem;
  background:var(--navy-3);
  border:1px solid var(--border-subtle);
  border-radius:var(--radius-xs);
  color:var(--cream);
  font-family:var(--font-body);
  font-size:0.85rem;
  outline:none;
  cursor:pointer;
  margin-top:0.4rem;
}

/* Prayer times */
.prayer-row { display:flex; justify-content:space-between; align-items:center; padding:0.9rem 1rem; background:var(--navy-2); border:1px solid var(--border-subtle); border-radius:var(--radius-sm); margin-bottom:0.5rem; transition:0.2s; }
.prayer-row.next { border-color:var(--emerald-light); background:rgba(26,107,74,0.12); }
.prayer-row.past { opacity:0.4; }
.prayer-pname { font-weight:600; font-size:0.88rem; }
.prayer-ptime { font-weight:700; color:var(--gold); font-family:var(--font-heading); }
.next-tag { font-size:0.65rem; color:var(--emerald-light); background:rgba(37,160,110,0.15); padding:2px 7px; border-radius:10px; margin-left:6px; }
.loc-row { text-align:center; font-size:0.78rem; color:var(--cream-muted); padding:0.6rem; background:var(--navy-2); border-radius:var(--radius-xs); margin-bottom:1rem; }

/* Bookmark items */
.bm-item { display:flex; justify-content:space-between; align-items:center; padding:0.9rem 1rem; background:var(--navy-2); border:1px solid var(--border-subtle); border-radius:var(--radius-sm); margin-bottom:0.5rem; cursor:pointer; transition:0.2s; }
.bm-item:hover { border-color:var(--border); }
.bm-surah { font-weight:600; font-size:0.88rem; margin-bottom:0.2rem; }
.bm-arabic { font-family:var(--font-arabic); font-size:1rem; color:var(--cream-dim); direction:rtl; }
.bm-del { width:28px; height:28px; border-radius:6px; border:1px solid transparent; background:none; color:var(--cream-muted); cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:0.75rem; transition:0.2s; }
.bm-del:hover { background:rgba(192,57,43,0.12); border-color:var(--red); color:var(--red); }

/* ═══════════════════════════════════════════
   QUIZ
═══════════════════════════════════════════ */
.quiz-q { font-size:0.88rem; color:var(--cream-dim); margin-bottom:0.5rem; }
.quiz-arabic { font-family:var(--font-arabic); font-size:1.6rem; text-align:right; direction:rtl; margin-bottom:1.2rem; background:var(--navy-2); padding:1rem; border-radius:var(--radius-sm); border:1px solid var(--border-subtle); }
.quiz-options { display:flex; flex-direction:column; gap:0.5rem; }
.quiz-opt {
  padding:0.9rem 1rem;
  background:var(--navy-2);
  border:1px solid var(--border-subtle);
  border-radius:var(--radius-sm);
  cursor:pointer;
  font-family:var(--font-arabic);
  font-size:1.2rem;
  text-align:right;
  direction:rtl;
  transition:0.2s;
  color:var(--cream);
}
.quiz-opt:hover { border-color:var(--border); background:var(--navy-3); }
.quiz-opt.correct { border-color:#00b894; background:rgba(0,184,148,0.12); color:#00b894; }
.quiz-opt.wrong { border-color:var(--red); background:rgba(192,57,43,0.12); color:var(--red); }
.quiz-score { text-align:center; padding:1rem; }
.quiz-score-num { font-family:var(--font-heading); font-size:2.5rem; color:var(--gold); }
.quiz-next { width:100%; margin-top:1rem; padding:0.8rem; background:var(--emerald); border:none; border-radius:var(--radius-sm); color:white; font-family:var(--font-body); font-size:0.9rem; font-weight:600; cursor:pointer; transition:0.2s; }
.quiz-next:hover { background:var(--emerald-light); }

/* ═══════════════════════════════════════════
   DZIKIR COUNTER
═══════════════════════════════════════════ */
.dzikir-section { text-align:center; }
.dzikir-name { font-family:var(--font-arabic); font-size:2rem; color:var(--gold-light); margin-bottom:0.3rem; }
.dzikir-latin { font-size:0.82rem; color:var(--cream-muted); margin-bottom:1.5rem; }
.dzikir-counter-display {
  width:140px; height:140px;
  border-radius:50%;
  background: conic-gradient(var(--emerald) 0%, var(--navy-3) 0%);
  display:flex; align-items:center; justify-content:center;
  margin:0 auto 1.2rem;
  position:relative;
  transition:background 0.3s;
}
.dzikir-counter-display::before {
  content:'';
  position:absolute;
  inset:8px;
  background:var(--navy);
  border-radius:50%;
}
.dzikir-num { font-family:var(--font-heading); font-size:2.5rem; color:var(--cream); position:relative; z-index:1; }
.dzikir-target { font-size:0.75rem; color:var(--cream-muted); position:relative; z-index:1; display:block; }
.dzikir-tap {
  width:80px; height:80px;
  border-radius:50%;
  background:var(--emerald);
  border:none;
  color:white;
  font-size:1.8rem;
  cursor:pointer;
  transition:transform 0.1s, box-shadow 0.1s;
  box-shadow:0 6px 20px var(--emerald-glow);
  margin-bottom:1rem;
}
.dzikir-tap:active { transform:scale(0.92); box-shadow:0 2px 8px var(--emerald-glow); }
.dzikir-list { display:grid; grid-template-columns:1fr 1fr; gap:0.5rem; margin-top:1rem; }
.dzikir-item { padding:0.7rem; background:var(--navy-2); border:1px solid var(--border-subtle); border-radius:var(--radius-sm); cursor:pointer; transition:0.2s; }
.dzikir-item:hover { border-color:var(--border); }
.dzikir-item.active-dzikir { border-color:var(--emerald-light); background:rgba(26,107,74,0.12); }
.dzikir-item-arab { font-family:var(--font-arabic); font-size:1.1rem; color:var(--gold-light); }
.dzikir-item-name { font-size:0.7rem; color:var(--cream-muted); }

/* ═══════════════════════════════════════════
   STATS
═══════════════════════════════════════════ */
.stats-grid { display:grid; grid-template-columns:1fr 1fr; gap:0.8rem; }
.stat-box { background:var(--navy-2); border:1px solid var(--border-subtle); border-radius:var(--radius-sm); padding:1.1rem; text-align:center; }
.stat-box-num { font-family:var(--font-heading); font-size:1.8rem; color:var(--gold); }
.stat-box-label { font-size:0.72rem; color:var(--cream-muted); text-transform:uppercase; letter-spacing:0.08em; margin-top:0.2rem; }
.streak-flame { font-size:1.5rem; }

/* SHARE CARD */
.share-preview {
  background: linear-gradient(135deg, var(--navy-3), var(--navy-2));
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2rem;
  text-align: center;
  margin-bottom: 1rem;
  min-height: 180px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.8rem;
}
.share-preview .sp-arabic { font-family:var(--font-arabic); font-size:1.6rem; color:var(--gold-light); direction:rtl; }
.share-preview .sp-trans { font-size:0.85rem; color:var(--cream-dim); line-height:1.7; }
.share-preview .sp-ref { font-size:0.7rem; color:var(--gold); margin-top:0.3rem; font-family:var(--font-heading); }
.share-styles { display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:1rem; }
.share-style-btn { padding:0.35rem 0.9rem; border-radius:20px; border:1px solid var(--border-subtle); background:var(--navy-2); color:var(--cream-dim); font-size:0.75rem; cursor:pointer; transition:0.2s; font-family:var(--font-body); }
.share-style-btn.active { background:var(--emerald); border-color:var(--emerald-light); color:white; }
.share-download { width:100%; padding:0.8rem; background:var(--gold); border:none; border-radius:var(--radius-sm); color:var(--night); font-family:var(--font-body); font-weight:700; font-size:0.9rem; cursor:pointer; transition:0.2s; }
.share-download:hover { background:var(--gold-light); }

/* ═══════════════════════════════════════════
   AUDIO PLAYER
═══════════════════════════════════════════ */
.audio-bar {
  position: fixed;
  bottom: 55px; left: 0; right: 0;
  background: rgba(13,24,33,0.97);
  border-top: 1px solid var(--border-subtle);
  padding: 0.75rem 2rem;
  display: none;
  z-index: 350;
  backdrop-filter: blur(20px);
}
.audio-bar.show { display: block; }
[data-theme="light"] .audio-bar { background: rgba(240,235,224,0.97); }
.audio-inner { max-width:1100px; margin:0 auto; display:flex; align-items:center; gap:1.2rem; }
.audio-meta { flex:1; min-width:0; }
.audio-title { font-size:0.88rem; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.audio-sub { font-size:0.72rem; color:var(--cream-muted); }
.audio-progress-wrap { width:100%; height:3px; background:var(--navy-3); border-radius:2px; cursor:pointer; margin-top:0.4rem; }
.audio-prog { height:100%; background:linear-gradient(90deg,var(--emerald-light),var(--gold)); border-radius:2px; width:0%; transition:width 0.5s; }
.audio-btns { display:flex; gap:0.4rem; align-items:center; }
.aplay-btn {
  width:38px; height:38px; border-radius:50%;
  background:var(--emerald); border:none; color:white;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; font-size:0.9rem; transition:0.2s;
}
.aplay-btn:hover { background:var(--emerald-light); transform:scale(1.05); }
.asmall-btn {
  width:30px; height:30px; border-radius:8px;
  background:var(--navy-2); border:1px solid var(--border-subtle);
  color:var(--cream-muted); cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  font-size:0.78rem; transition:0.2s;
}
.asmall-btn:hover { color:var(--cream); border-color:var(--border); }

/* ═══════════════════════════════════════════
   TOAST
═══════════════════════════════════════════ */
.toast {
  position: fixed;
  bottom: 120px; left: 50%;
  transform: translateX(-50%) translateY(12px);
  background: var(--navy-4);
  border: 1px solid var(--border);
  color: var(--cream);
  padding: 0.6rem 1.4rem;
  border-radius: 20px;
  font-size: 0.82rem;
  opacity: 0;
  transition: all 0.3s;
  z-index: 9998;
  pointer-events: none;
  white-space: nowrap;
}
.toast.show { opacity:1; transform:translateX(-50%) translateY(0); }

/* ═══════════════════════════════════════════
   LOADING / EMPTY
═══════════════════════════════════════════ */
.loader { text-align:center; padding:3rem; color:var(--cream-muted); }
.loader i { font-size:2rem; animation:spin 1s linear infinite; display:block; margin-bottom:0.8rem; color:var(--gold); }
@keyframes spin { 100%{transform:rotate(360deg)} }
.empty { text-align:center; padding:3rem; color:var(--cream-muted); }
.empty i { font-size:2.5rem; display:block; margin-bottom:0.8rem; opacity:0.3; }

/* ═══════════════════════════════════════════
   ANIMATIONS
═══════════════════════════════════════════ */
@keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }
.fade-in { animation: fadeIn 0.35s ease both; }

/* ═══════════════════════════════════════════
   RESPONSIVE
═══════════════════════════════════════════ */
@media(max-width:768px){
  .main { padding:1rem 1rem 6rem; }
  .hero-strip { grid-template-columns:1fr 1fr; }
  .surah-grid { grid-template-columns:1fr; }
  .juz-grid { grid-template-columns:repeat(6,1fr); }
  .header { padding:0 1rem; }
  .search-wrap { padding:0.65rem 1rem; }
  .hijri-pill { display:none; }
  .arabic-text { font-size:1.6rem !important; }
  .stats-grid { grid-template-columns:1fr 1fr; }
}
@media(max-width:480px){
  .hero-strip { grid-template-columns:1fr 1fr; }
  .juz-grid { grid-template-columns:repeat(5,1fr); }
}
</style>
</head>
<body data-theme="dark">

<div class="reading-bar" id="readingBar"></div>

<!-- HEADER -->
<header class="header">
  <div class="logo" onclick="goHome()">
    <div class="logo-icon"><i class="fas fa-book-quran"></i></div>
    <div>
      <span class="logo-text">Mushaf</span>
      <span class="logo-sub">Al-Quran Digital</span>
    </div>
  </div>
  <div class="header-center">
    <div class="hijri-pill" id="hijriPill">—</div>
  </div>
  <div class="header-actions">
    <button class="hbtn" id="hbtnBookmark" onclick="openModal('bookmarkModal')" title="Bookmark">
      <i class="fas fa-bookmark"></i>
      <span class="dot" id="bmDot"></span>
    </button>
    <button class="hbtn" onclick="openModal('prayerModal')" title="Jadwal Sholat">
      <i class="fas fa-mosque"></i>
      <span class="dot" id="prayDot"></span>
    </button>
    <button class="hbtn" onclick="openModal('settingsModal')" title="Pengaturan">
      <i class="fas fa-sliders-h"></i>
    </button>
  </div>
</header>

<!-- SEARCH -->
<div class="search-wrap" id="searchWrap">
  <div class="search-inner">
    <i class="fas fa-search search-ico"></i>
    <input class="search-input" id="searchInput" type="text" placeholder="Cari surah, terjemahan..." oninput="onSearch(this.value)">
    <button class="search-x" id="searchX" onclick="clearSearch()"><i class="fas fa-times"></i></button>
  </div>
</div>

<!-- MAIN -->
<main class="main" id="mainContent">

  <!-- PRAYER ALERT -->
  <div class="prayer-alert-banner hidden" id="prayerAlert">
    <div class="prayer-alert-left">
      <span class="prayer-bell"><i class="fas fa-bell"></i></span>
      <div>
        <div class="prayer-alert-name" id="alertName">—</div>
        <div class="prayer-alert-time" id="alertTime">—</div>
      </div>
    </div>
    <button class="btn-dismiss" onclick="dismissPrayerAlert()">Tutup</button>
  </div>

  <!-- LAST READ -->
  <div class="resume-card hidden" id="resumeCard" onclick="resumeReading()">
    <div class="resume-left">
      <span class="resume-icon"><i class="fas fa-book-open"></i></span>
      <div>
        <div class="resume-label">Lanjut membaca</div>
        <div class="resume-name" id="resumeName">—</div>
      </div>
    </div>
    <button class="resume-btn">Lanjut →</button>
  </div>

  <!-- STATS STRIP -->
  <div class="hero-strip" id="statsStrip">
    <div class="stat-card">
      <div class="stat-label">Streak</div>
      <div class="stat-value" id="statStreak">0 <i class="fas fa-fire"></i></div>
      <div class="stat-sub">hari berturut</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Surah Dibaca</div>
      <div class="stat-value" id="statSurah">0</div>
      <div class="stat-sub">dari 114</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Total Ayat</div>
      <div class="stat-value" id="statAyat">0</div>
      <div class="stat-sub">ayat dibaca</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Bookmark</div>
      <div class="stat-value" id="statBm">0</div>
      <div class="stat-sub">tersimpan</div>
    </div>
  </div>

  <!-- JUZ NAV -->
  <div class="juz-section" id="juzSection">
    <div class="section-head">
      <span class="section-title"><i class="fas fa-layer-group"></i> Juz</span>
    </div>
    <div class="juz-grid" id="juzGrid"></div>
  </div>

  <!-- SURAH LIST -->
  <div id="surahSection">
    <div class="section-head">
      <span class="section-title" id="listTitle"><i class="fas fa-book-open"></i> Daftar Surah</span>
      <button class="section-action" id="btnAll" onclick="showAll()">Semua Surah</button>
    </div>
    <div class="surah-grid" id="surahGrid">
      <div class="loader" style="grid-column:1/-1"><i class="fas fa-spinner"></i><p>Memuat Al-Quran...</p></div>
    </div>
  </div>

  <!-- AYAH VIEW -->
  <div class="ayah-view" id="ayahView">
    <button class="back-btn" onclick="backToList()">
      <i class="fas fa-arrow-left"></i> Kembali
    </button>
    <div id="ayahContent"></div>
  </div>

</main>

<!-- BOTTOM NAV -->
<nav class="bottom-nav">
  <button class="bnav-item active" id="navHome" onclick="goHome()">
    <i class="fas fa-home"></i>
    <span>Beranda</span>
  </button>
  <button class="bnav-item" onclick="openModal('quizModal')">
    <i class="fas fa-brain"></i>
    <span>Kuis</span>
  </button>
  <button class="bnav-item" onclick="openModal('dzikirModal')">
    <i class="fas fa-infinity"></i>
    <span>Dzikir</span>
  </button>
  <button class="bnav-item" onclick="openModal('doaModal')">
    <i class="fas fa-hands-praying"></i>
    <span>Doa</span>
  </button>
  <button class="bnav-item" onclick="openModal('statsModal')">
    <i class="fas fa-chart-bar"></i>
    <span>Statistik</span>
  </button>
</nav>

<!-- AUDIO PLAYER -->
<div class="audio-bar" id="audioBar">
  <div class="audio-inner">
    <div class="audio-meta">
      <div class="audio-title" id="audioTitle">—</div>
      <div class="audio-sub" id="audioSub">—</div>
      <div class="audio-progress-wrap" onclick="seekAudio(event)">
        <div class="audio-prog" id="audioProg"></div>
      </div>
    </div>
    <div class="audio-btns">
      <button class="asmall-btn" onclick="prevAyah()"><i class="fas fa-step-backward"></i></button>
      <button class="aplay-btn" id="playBtn" onclick="togglePlay()"><i class="fas fa-play"></i></button>
      <button class="asmall-btn" onclick="nextAyah()"><i class="fas fa-step-forward"></i></button>
      <button class="asmall-btn" onclick="closeAudio()"><i class="fas fa-times"></i></button>
    </div>
  </div>
</div>

<audio id="qaudio"></audio>
<div class="toast" id="toast"></div>

<!-- ═══ MODALS ═══ -->

<!-- SETTINGS -->
<div class="overlay center" id="settingsModal" onclick="closeModalBg(event,'settingsModal')">
  <div class="sheet" style="border-radius:20px;max-width:500px">
    <div class="sheet-header">
      <span class="sheet-title"><i class="fas fa-cog"></i> Pengaturan</span>
      <button class="sheet-close" onclick="closeModal('settingsModal')"><i class="fas fa-times"></i></button>
    </div>

    <div style="margin-bottom:1rem">
      <div class="setting-row">
        <div><div class="setting-label">Terjemahan</div></div>
        <div class="toggle on" id="tglTrans" onclick="toggleSetting('translation')"></div>
      </div>
      <div class="setting-row">
        <div><div class="setting-label">Tafsir Singkat</div><div class="setting-sub">Dari Al-Muntakhab</div></div>
        <div class="toggle" id="tglTafsir" onclick="toggleSetting('tafsir')"></div>
      </div>
      <div class="setting-row">
        <div><div class="setting-label">Word-by-Word</div><div class="setting-sub">Terjemah per kata</div></div>
        <div class="toggle" id="tglWbw" onclick="toggleSetting('wbw')"></div>
      </div>
      <div class="setting-row">
        <div><div class="setting-label">Tajwid Highlight</div><div class="setting-sub">Warna hukum tajwid</div></div>
        <div class="toggle" id="tglTajwid" onclick="toggleSetting('tajwid')"></div>
      </div>
      <div class="setting-row">
        <div><div class="setting-label">Mode Hafalan</div><div class="setting-sub">Blur teks Arab</div></div>
        <div class="toggle" id="tglHafalan" onclick="toggleSetting('hafalan')"></div>
      </div>
      <div class="setting-row">
        <div><div class="setting-label">Dark Mode</div></div>
        <div class="toggle on" id="tglDark" onclick="toggleDark()"></div>
      </div>
    </div>

    <div style="margin-bottom:1rem">
      <div class="range-wrap">
        <div class="range-label"><span>Ukuran Arab</span><span id="sizeVal">2.0rem</span></div>
        <input type="range" id="sizeRange" min="1.2" max="3.5" step="0.1" value="2.0" oninput="changeSize(this.value)">
      </div>
    </div>

    <div style="margin-bottom:1rem">
      <div class="setting-label" style="margin-bottom:0.5rem">Tema Warna</div>
      <div class="theme-pills">
        <button class="theme-pill" data-theme="green" onclick="setTheme('green')"><i class="fas fa-leaf"></i> Emerald</button>
        <button class="theme-pill" data-theme="teal" onclick="setTheme('teal')"><i class="fas fa-water"></i> Teal</button>
        <button class="theme-pill" data-theme="amber" onclick="setTheme('amber')"><i class="fas fa-moon"></i> Amber</button>
        <button class="theme-pill" data-theme="rose" onclick="setTheme('rose')"><i class="fas fa-spa"></i> Rose</button>
      </div>
    </div>

    <div>
      <div class="setting-label" style="margin-bottom:0.3rem">Qari</div>
      <select class="sty" id="qariSel">
        <option value="ar.alafasy">Mishary Rashid Al-Afasy</option>
        <option value="ar.abdurrahmaansudais">Abdurrahman As-Sudais</option>
        <option value="ar.husary">Mahmoud Khalil Al-Hussary</option>
        <option value="ar.minshawi">Muhammad Siddiq Al-Minshawi</option>
      </select>
    </div>
  </div>
</div>

<!-- PRAYER TIMES -->
<div class="overlay" id="prayerModal" onclick="closeModalBg(event,'prayerModal')">
  <div class="sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-header">
      <span class="sheet-title"><i class="fas fa-mosque"></i> Jadwal Sholat</span>
      <button class="sheet-close" onclick="closeModal('prayerModal')"><i class="fas fa-times"></i></button>
    </div>
    <div id="prayerContent">
      <div class="loader"><i class="fas fa-spinner"></i><p>Mendeteksi lokasi...</p></div>
    </div>
  </div>
</div>

<!-- BOOKMARKS -->
<div class="overlay" id="bookmarkModal" onclick="closeModalBg(event,'bookmarkModal')">
  <div class="sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-header">
      <span class="sheet-title"><i class="fas fa-bookmark"></i> Bookmark</span>
      <button class="sheet-close" onclick="closeModal('bookmarkModal')"><i class="fas fa-times"></i></button>
    </div>
    <div id="bookmarkContent"></div>
  </div>
</div>

<!-- QUIZ -->
<div class="overlay center" id="quizModal" onclick="closeModalBg(event,'quizModal')">
  <div class="sheet" style="border-radius:20px;max-width:520px">
    <div class="sheet-header">
      <span class="sheet-title"><i class="fas fa-brain"></i> Kuis Hafalan</span>
      <button class="sheet-close" onclick="closeModal('quizModal')"><i class="fas fa-times"></i></button>
    </div>
    <div id="quizContent">
      <div class="loader"><i class="fas fa-spinner"></i><p>Menyiapkan soal...</p></div>
    </div>
  </div>
</div>

<!-- DZIKIR -->
<div class="overlay" id="dzikirModal" onclick="closeModalBg(event,'dzikirModal')">
  <div class="sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-header">
      <span class="sheet-title"><i class="fas fa-infinity"></i> Dzikir Counter</span>
      <button class="sheet-close" onclick="closeModal('dzikirModal')"><i class="fas fa-times"></i></button>
    </div>
    <div id="dzikirContent"></div>
  </div>
</div>

<!-- DOA -->
<div class="overlay" id="doaModal" onclick="closeModalBg(event,'doaModal')">
  <div class="sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-header">
      <span class="sheet-title"><i class="fas fa-hands-praying"></i> Doa Harian</span>
      <button class="sheet-close" onclick="closeModal('doaModal')"><i class="fas fa-times"></i></button>
    </div>
    <div id="doaContent"></div>
  </div>
</div>

<!-- STATS -->
<div class="overlay center" id="statsModal" onclick="closeModalBg(event,'statsModal')">
  <div class="sheet" style="border-radius:20px;max-width:460px">
    <div class="sheet-header">
      <span class="sheet-title"><i class="fas fa-chart-bar"></i> Statistik Bacaan</span>
      <button class="sheet-close" onclick="closeModal('statsModal')"><i class="fas fa-times"></i></button>
    </div>
    <div id="statsContent"></div>
  </div>
</div>

<!-- SHARE -->
<div class="overlay center" id="shareModal" onclick="closeModalBg(event,'shareModal')">
  <div class="sheet" style="border-radius:20px;max-width:480px">
    <div class="sheet-header">
      <span class="sheet-title"><i class="fas fa-share-from-square"></i> Bagikan Ayat</span>
      <button class="sheet-close" onclick="closeModal('shareModal')"><i class="fas fa-times"></i></button>
    </div>
    <div id="shareContent"></div>
  </div>
</div>

<script>
// ════════════════════════════════════════
// STATE
// ════════════════════════════════════════
const S = {
  settings: { translation:true, tafsir:false, wbw:false, tajwid:false, hafalan:false, dark:true, arabicSize:2.0, theme:'green', qari:'ar.alafasy' },
  bookmarks: {},
  lastRead: null,
  stats: { surahRead:new Set(), totalAyat:0, streak:0, lastDate:null },
  prayer: null,
  userLoc: null,
  dzikirState: { name:'Subhanallah', arabic:'سُبْحَانَ اللَّهِ', count:0, target:33 },
};

let quranData = [];
let currentSurah = null;
let currentAyahIdx = 0;
let audioPlaying = false;
let tafsirCache = {};
let quizData = [];
let quizIdx = 0;
let quizScore = 0;
let shareAyah = null;
let adzanAudio = new Audio('https://www.islamcan.com/audio/adhan/azan1.mp3');

// ════════════════════════════════════════
// STORAGE
// ════════════════════════════════════════
function sv(k,v){ try{localStorage.setItem('mshf_'+k,JSON.stringify(v))}catch(e){} }
function ld(k,d){ try{const v=localStorage.getItem('mshf_'+k);return v!==null?JSON.parse(v):d}catch(e){return d} }

function loadAll(){
  S.settings   = {...S.settings, ...ld('settings',{})};
  S.bookmarks  = ld('bookmarks',{});
  S.lastRead   = ld('lastRead',null);
  const st     = ld('stats',{});
  S.stats.surahRead  = new Set(st.surahRead||[]);
  S.stats.totalAyat  = st.totalAyat||0;
  S.stats.streak     = st.streak||0;
  S.stats.lastDate   = st.lastDate||null;
}
function saveStats(){
  sv('stats',{ surahRead:[...S.stats.surahRead], totalAyat:S.stats.totalAyat, streak:S.stats.streak, lastDate:S.stats.lastDate });
}

// ════════════════════════════════════════
// INIT
// ════════════════════════════════════════
document.addEventListener('DOMContentLoaded', ()=>{
  loadAll();
  applyAll();
  generateJuz();
  loadMeta();
  setHijri();
  updateResumeBanner();
  updateBmBadge();
  updateStatsStrip();
  fetchPrayer();
  initDzikir();
  initDoa();

  document.getElementById('qaudio').addEventListener('ended', nextAyah);
  document.getElementById('qaudio').addEventListener('timeupdate', updateAudioProg);
  document.getElementById('qariSel').addEventListener('change', e=>{ S.settings.qari=e.target.value; sv('settings',S.settings); });
  window.addEventListener('scroll', updateReadingBar);
  checkStreakToday();
});

// ════════════════════════════════════════
// APPLY SETTINGS
// ════════════════════════════════════════
function applyAll(){
  const s = S.settings;
  document.documentElement.setAttribute('data-theme', s.dark ? 'dark' : 'light');
  setToggle('tglTrans', s.translation);
  setToggle('tglTafsir', s.tafsir);
  setToggle('tglWbw', s.wbw);
  setToggle('tglTajwid', s.tajwid);
  setToggle('tglHafalan', s.hafalan);
  setToggle('tglDark', s.dark);
  document.getElementById('sizeRange').value = s.arabicSize;
  document.getElementById('sizeVal').textContent = s.arabicSize+'rem';
  document.getElementById('qariSel').value = s.qari;
  document.querySelectorAll('.theme-pill').forEach(b=>b.classList.toggle('active',b.dataset.theme===s.theme));
}
function setToggle(id, val){ document.getElementById(id)?.classList.toggle('on',!!val); }

function toggleSetting(key){
  S.settings[key] = !S.settings[key];
  sv('settings',S.settings);
  applyAll();
  // Live update
  if(key==='translation') document.querySelectorAll('.translation-block').forEach(el=>el.classList.toggle('show',S.settings.translation));
  if(key==='tafsir'){ document.querySelectorAll('.tafsir-block').forEach(el=>el.classList.toggle('show',S.settings.tafsir)); if(S.settings.tafsir&&currentSurah) loadTafsir(currentSurah.number); }
  if(key==='wbw') document.querySelectorAll('.word-wrap').forEach(el=>el.classList.toggle('show',S.settings.wbw));
  if(key==='hafalan') document.querySelectorAll('.arabic-text').forEach(el=>el.classList.toggle('blur',S.settings.hafalan));
  if(key==='tajwid' && currentSurah) displayAyahs();
}
function toggleDark(){ S.settings.dark=!S.settings.dark; sv('settings',S.settings); applyAll(); }
function setTheme(t){ S.settings.theme=t; sv('settings',S.settings); applyAll(); }
function changeSize(v){ S.settings.arabicSize=parseFloat(v); sv('settings',S.settings); document.getElementById('sizeVal').textContent=v+'rem'; document.querySelectorAll('.arabic-text').forEach(el=>el.style.fontSize=v+'rem'); }

// ════════════════════════════════════════
// MODAL HELPERS
// ════════════════════════════════════════
function openModal(id){
  document.getElementById(id).classList.add('active');
  if(id==='prayerModal') renderPrayer();
  if(id==='bookmarkModal') renderBookmarks();
  if(id==='quizModal') initQuiz();
  if(id==='statsModal') renderStats();
  if(id==='dzikirModal') renderDzikir();
  if(id==='doaModal') renderDoa();
}
function closeModal(id){ document.getElementById(id).classList.remove('active'); }
function closeModalBg(e,id){ if(e.target===document.getElementById(id)) closeModal(id); }

// ════════════════════════════════════════
// HIJRI DATE
// ════════════════════════════════════════
function setHijri(){
  try{
    const h=new Intl.DateTimeFormat('id-u-ca-islamic',{day:'numeric',month:'long',year:'numeric'}).format(new Date());
    document.getElementById('hijriPill').textContent=h;
  }catch(e){
    fetch('https://api.aladhan.com/v1/gToH?date='+new Date().toLocaleDateString('en-GB').replace(/\//g,'-'))
      .then(r=>r.json()).then(d=>{ const h=d.data.hijri; document.getElementById('hijriPill').textContent=`${h.day} ${h.month.en} ${h.year}H`; }).catch(()=>{});
  }
}

// ════════════════════════════════════════
// PRAYER TIMES
// ════════════════════════════════════════
function fetchPrayer(){
  if(!navigator.geolocation){ fetchPrayerIP(); return; }
  navigator.geolocation.getCurrentPosition(
    p=>{ S.userLoc={lat:p.coords.latitude,lon:p.coords.longitude}; loadPrayerAPI(S.userLoc.lat,S.userLoc.lon); },
    ()=>fetchPrayerIP()
  );
}
function fetchPrayerIP(){
  fetch('https://ipapi.co/json/')
    .then(r=>r.json())
    .then(d=>{ S.userLoc={lat:d.latitude,lon:d.longitude,city:d.city+', '+d.country_name}; loadPrayerAPI(d.latitude,d.longitude); })
    .catch(()=>{ S.userLoc={lat:-7.7325,lon:109.0039,city:'Indonesia'}; loadPrayerAPI(-7.7325,109.0039); });
}
function loadPrayerAPI(lat,lon){
  const d=new Date();
  const dd=String(d.getDate()).padStart(2,'0'), mm=String(d.getMonth()+1).padStart(2,'0'), yyyy=d.getFullYear();
  fetch(`https://api.aladhan.com/v1/timings/${dd}-${mm}-${yyyy}?latitude=${lat}&longitude=${lon}&method=11`)
    .then(r=>r.json())
    .then(data=>{
      const t=data.data.timings;
      if(!S.userLoc.city) S.userLoc.city=data.data.meta.timezone;
      S.prayer={ Subuh:t.Fajr.substring(0,5), Dzuhur:t.Dhuhr.substring(0,5), Ashar:t.Asr.substring(0,5), Maghrib:t.Maghrib.substring(0,5), Isya:t.Isha.substring(0,5) };
      checkPrayerNow();
    }).catch(()=>{ S.prayer={Subuh:'04:45',Dzuhur:'11:55',Ashar:'15:15',Maghrib:'17:55',Isya:'19:05'}; });
}
function checkPrayerNow(){
  if(!S.prayer) return;
  const now=new Date(), cur=now.getHours().toString().padStart(2,'0')+':'+now.getMinutes().toString().padStart(2,'0');
  Object.keys(S.prayer).forEach(p=>{ if(cur===S.prayer[p]) showPrayerAlert(p,S.prayer[p]); });
}
setInterval(checkPrayerNow, 60000);
function showPrayerAlert(name,time){
  document.getElementById('alertName').textContent='Waktu Sholat '+name;
  document.getElementById('alertTime').textContent=time+' — '+( S.userLoc?.city||'lokasi kamu');
  document.getElementById('prayerAlert').classList.remove('hidden');
  document.getElementById('prayDot').classList.add('show');
  adzanAudio.currentTime = 0;
  adzanAudio.play().catch(()=>{});
}
function dismissPrayerAlert(){ document.getElementById('prayerAlert').classList.add('hidden'); document.getElementById('prayDot').classList.remove('show'); adzanAudio.pause(); }
function renderPrayer(){
  const c=document.getElementById('prayerContent');
  if(!S.prayer){ c.innerHTML='<div class="loader"><i class="fas fa-spinner"></i><p>Mendeteksi lokasi...</p></div>'; return; }
  const now=new Date(), cur=now.getHours().toString().padStart(2,'0')+':'+now.getMinutes().toString().padStart(2,'0');
  const keys=Object.keys(S.prayer), next=keys.find(p=>S.prayer[p]>cur);
  let html=`<div class="loc-row"><i class="fas fa-map-marker-alt"></i> ${S.userLoc?.city||'Lokasi kamu'}</div>`;
  keys.forEach(p=>{
    const t=S.prayer[p], past=t<cur, isNext=p===next;
    html+=`<div class="prayer-row ${past?'past':''} ${isNext?'next':''}">
      <div><span class="prayer-pname">${p}</span>${isNext?'<span class="next-tag">Berikutnya</span>':''}</div>
      <span class="prayer-ptime">${t}</span>
    </div>`;
  });
  c.innerHTML=html;
}

// ════════════════════════════════════════
// QURAN DATA
// ════════════════════════════════════════
async function loadMeta(){
  try{
    const r=await fetch('https://api.alquran.cloud/v1/meta');
    const d=await r.json();
    quranData=d.data.surahs.references;
    renderSurahList(quranData);
    initQuizData();
  }catch(e){ loadFallback(); }
}

function renderSurahList(list){
  const g=document.getElementById('surahGrid');
  if(!list.length){ g.innerHTML='<div class="empty" style="grid-column:1/-1"><i class="fas fa-search"></i><p>Tidak ditemukan</p></div>'; return; }
  g.innerHTML=list.map(s=>{
    const hasBm=Object.keys(S.bookmarks).some(k=>k.startsWith(s.number+'-'));
    return `<div class="surah-card ${hasBm?'has-bookmark':''} fade-in" onclick="loadSurah(${s.number})">
      <div class="surah-left">
        <div class="surah-num">${s.number}</div>
        <div>
          <div class="surah-name">${s.englishName}</div>
          <div class="surah-meta">${s.englishNameTranslation} · ${s.numberOfAyahs} Ayat</div>
        </div>
      </div>
      <div class="surah-right">
        <div class="surah-arabic-name">${s.name}</div>
        <div class="surah-type">${s.revelationType}</div>
      </div>
    </div>`;
  }).join('');
}

// ════════════════════════════════════════
// JUZ
// ════════════════════════════════════════
const JUZ={1:{s:1,e:2},2:{s:2,e:2},3:{s:2,e:3},4:{s:3,e:4},5:{s:4,e:4},6:{s:4,e:5},7:{s:5,e:6},8:{s:6,e:7},9:{s:7,e:8},10:{s:8,e:9},11:{s:9,e:11},12:{s:11,e:12},13:{s:12,e:14},14:{s:15,e:16},15:{s:17,e:18},16:{s:18,e:20},17:{s:21,e:22},18:{s:23,e:25},19:{s:25,e:27},20:{s:27,e:29},21:{s:29,e:33},22:{s:33,e:36},23:{s:36,e:39},24:{s:39,e:41},25:{s:41,e:45},26:{s:46,e:51},27:{s:51,e:57},28:{s:58,e:66},29:{s:67,e:77},30:{s:78,e:114}};

function generateJuz(){
  const g=document.getElementById('juzGrid');
  for(let i=1;i<=30;i++){
    const b=document.createElement('button');
    b.className='juz-btn'; b.dataset.juz=i;
    b.innerHTML=`<span class="juz-num">${i}</span>Juz`;
    b.onclick=()=>filterJuz(i);
    g.appendChild(b);
  }
}
function filterJuz(n){
  document.querySelectorAll('.juz-btn').forEach(b=>b.classList.toggle('active',+b.dataset.juz===n));
  const {s,e}=JUZ[n];
  renderSurahList(quranData.filter(x=>x.number>=s&&x.number<=e));
  document.getElementById('listTitle').innerHTML=`<i class="fas fa-layer-group"></i> Juz ${n}`;
  document.getElementById('btnAll').classList.add('show');
  document.getElementById('surahSection').scrollIntoView({behavior:'smooth'});
}
function showAll(){
  document.querySelectorAll('.juz-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('listTitle').innerHTML='<i class="fas fa-book-open"></i> Daftar Surah';
  document.getElementById('btnAll').classList.remove('show');
  document.getElementById('searchInput').value='';
  document.getElementById('searchX').style.display='none';
  renderSurahList(quranData);
}

// ════════════════════════════════════════
// SEARCH
// ════════════════════════════════════════
function onSearch(v){
  document.getElementById('searchX').style.display=v?'block':'none';
  if(!v.trim()){ renderSurahList(quranData); document.getElementById('listTitle').innerHTML='<i class="fas fa-book-open"></i> Daftar Surah'; document.getElementById('btnAll').classList.remove('show'); return; }
  const q=v.toLowerCase();
  const r=quranData.filter(s=>s.englishName.toLowerCase().includes(q)||s.englishNameTranslation.toLowerCase().includes(q)||String(s.number).includes(q));
  document.getElementById('listTitle').innerHTML=`<i class="fas fa-search"></i> "${v}"`;
  document.getElementById('btnAll').classList.add('show');
  renderSurahList(r);
}
function clearSearch(){ document.getElementById('searchInput').value=''; document.getElementById('searchX').style.display='none'; showAll(); }

// ════════════════════════════════════════
// LOAD SURAH
// ════════════════════════════════════════
async function loadSurah(num){
  showAyahView();
  document.getElementById('ayahContent').innerHTML='<div class="loader"><i class="fas fa-spinner"></i><p>Memuat surah...</p></div>';
  window.scrollTo(0,0);
  try{
    const r=await fetch(`https://api.alquran.cloud/v1/surah/${num}/editions/ar.alafasy,id.indonesian`);
    const d=await r.json();
    currentSurah={ number:num, arabic:d.data[0], translation:d.data[1] };
    S.lastRead={ num, name:d.data[0].englishName, ayah:0 };
    sv('lastRead',S.lastRead);
    S.stats.surahRead.add(num);
    checkStreakToday();
    saveStats();
    updateResumeBanner();
    updateStatsStrip();
    displayAyahs();
    if(S.settings.tafsir) loadTafsir(num);
  }catch(e){
    document.getElementById('ayahContent').innerHTML='<div class="empty"><i class="fas fa-wifi-slash"></i><p>Gagal memuat. Periksa koneksi.</p></div>';
  }
}

// ════════════════════════════════════════
// TAJWID — simple rule-based highlight
// ════════════════════════════════════════
const TAJWID_RULES=[
  { pattern:/([نم])\s+([بمف])/gu, cls:'tajwid-ikhfa', name:'Ikhfa' },
  { pattern:/([نم]ّ|نّ|مّ)/gu, cls:'tajwid-ghunnah', name:'Ghunnah' },
  { pattern:/([آ]|[اوي]{2})/gu, cls:'tajwid-mad', name:'Mad' },
  { pattern:/[قطبجد]/gu, cls:'tajwid-qalqalah', name:'Qalqalah' },
  { pattern:/([نم])\s+([رلوي])/gu, cls:'tajwid-idgham', name:'Idgham' },
];

function applyTajwid(text){
  if(!S.settings.tajwid) return text;
  let result=text;
  TAJWID_RULES.forEach(rule=>{
    result=result.replace(rule.pattern, match=>`<span class="${rule.cls}" title="${rule.name}">${match}</span>`);
  });
  return result;
}

// ════════════════════════════════════════
// WORD BY WORD (simple split approximation)
// ════════════════════════════════════════
function buildWordByWord(arabicText, transText){
  const words=arabicText.split(' ').filter(w=>w.trim());
  const transWords=transText.split(' ');
  return words.map((w,i)=>`
    <div class="word-item" onclick="this.querySelector('.w-tooltip').style.opacity=1">
      <span class="w-arab">${w}</span>
      <span class="w-trans">${transWords[i]||''}</span>
      <span class="w-tooltip">${w}</span>
    </div>`).join('');
}

// ════════════════════════════════════════
// DISPLAY AYAHS
// ════════════════════════════════════════
function displayAyahs(){
  const s=currentSurah.arabic, t=currentSurah.translation;
  const sz=S.settings.arabicSize;

  let html=`
    <div class="surah-hero" data-arabic="${s.name}">
      <div class="hero-arabic">${s.name}</div>
      <div class="hero-name">${s.englishName}</div>
      <div class="hero-meta">${s.englishNameTranslation}</div>
      <div class="hero-pills">
        <span class="pill pill-green">${s.numberOfAyahs} Ayat</span>
        <span class="pill pill-gold">${s.revelationType}</span>
      </div>
    </div>`;

  if(s.number!==9&&s.number!==1)
    html+=`<div class="bismillah-block">بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ</div>`;

  s.ayahs.forEach((ayah,idx)=>{
    const key=`${s.number}-${ayah.numberInSurah}`;
    const bm=!!S.bookmarks[key];
    const arabicHtml=applyTajwid(ayah.text);
    html+=`
      <div class="ayah-card ${bm?'bookmarked':''}" id="ac-${idx}">
        <div class="ayah-topbar">
          <span class="ayah-num-badge">${ayah.numberInSurah}</span>
          <div class="ayah-quick">
            <button class="qbtn ${bm?'gold':''}" onclick="toggleBm(${idx})" title="Bookmark"><i class="${bm?'fas':'far'} fa-bookmark"></i></button>
            <button class="qbtn" onclick="openShare(${idx})" title="Share"><i class="fas fa-share-alt"></i></button>
            <button class="qbtn" onclick="copyAyah(${idx})" title="Salin"><i class="far fa-copy"></i></button>
          </div>
        </div>
        <div class="arabic-text ${S.settings.hafalan?'blur':''}" style="font-size:${sz}rem" onclick="${S.settings.hafalan?`document.getElementById('ac-${idx}').querySelector('.arabic-text').classList.remove('blur')`:''}">
          ${arabicHtml}
        </div>
        <div class="word-wrap ${S.settings.wbw?'show':''}">${buildWordByWord(ayah.text, t.ayahs[idx].text)}</div>
        <div class="translation-block ${S.settings.translation?'show':''}">${t.ayahs[idx].text}</div>
        <div class="tafsir-block ${S.settings.tafsir?'show':''}" id="tf-${idx}"><i class="fas fa-spinner fa-spin"></i> Memuat tafsir...</div>
        <div class="ayah-footer">
          <button class="abtn primary" onclick="playAyah(${idx})"><i class="fas fa-play"></i> Putar</button>
          <button class="abtn" onclick="openShare(${idx})"><i class="fas fa-share-alt"></i> Share</button>
        </div>
      </div>`;
  });

  document.getElementById('ayahContent').innerHTML=html;
  S.stats.totalAyat+=s.ayahs.length;
  saveStats();
  updateStatsStrip();
}

// ════════════════════════════════════════
// TAFSIR
// ════════════════════════════════════════
async function loadTafsir(num){
  if(tafsirCache[num]){ applyTafsirDOM(tafsirCache[num]); return; }
  try{
    const r=await fetch(`https://api.alquran.cloud/v1/surah/${num}/id.muntakhab`);
    const d=await r.json();
    tafsirCache[num]=d.data.ayahs;
    applyTafsirDOM(d.data.ayahs);
  }catch(e){}
}
function applyTafsirDOM(ayahs){
  ayahs.forEach((a,i)=>{ const el=document.getElementById('tf-'+i); if(el) el.innerHTML=`<strong>Tafsir:</strong> ${a.text}`; });
}

// ════════════════════════════════════════
// BOOKMARK
// ════════════════════════════════════════
function toggleBm(idx){
  const s=currentSurah.arabic, ayah=s.ayahs[idx];
  const key=`${s.number}-${ayah.numberInSurah}`;
  if(S.bookmarks[key]){ delete S.bookmarks[key]; toast('Bookmark dihapus'); }
  else{ S.bookmarks[key]={ num:s.number, name:s.englishName, ayahNum:ayah.numberInSurah, arabic:ayah.text.substring(0,50)+'…' }; toast('<i class="fas fa-check-circle"></i> Disimpan'); }
  sv('bookmarks',S.bookmarks);
  updateBmBadge();
  updateStatsStrip();
  const card=document.getElementById('ac-'+idx);
  const btn=card?.querySelector('.qbtn');
  const bm=!!S.bookmarks[key];
  card?.classList.toggle('bookmarked',bm);
  if(btn){ btn.classList.toggle('gold',bm); btn.querySelector('i').className=(bm?'fas':'far')+' fa-bookmark'; }
}
function updateBmBadge(){ const n=Object.keys(S.bookmarks).length; document.getElementById('bmDot').classList.toggle('show',n>0); }
function renderBookmarks(){
  const c=document.getElementById('bookmarkContent');
  const keys=Object.keys(S.bookmarks);
  if(!keys.length){ c.innerHTML='<div class="empty"><i class="far fa-bookmark"></i><p>Belum ada bookmark</p></div>'; return; }
  c.innerHTML=keys.map(k=>{ const b=S.bookmarks[k]; return `
    <div class="bm-item" onclick="goToBm(${b.num})">
      <div>
        <div class="bm-surah">${b.name} — Ayat ${b.ayahNum}</div>
        <div class="bm-arabic">${b.arabic}</div>
      </div>
      <button class="bm-del" onclick="event.stopPropagation();delBm('${k}')"><i class="fas fa-trash"></i></button>
    </div>`; }).join('');
}
function delBm(k){ delete S.bookmarks[k]; sv('bookmarks',S.bookmarks); updateBmBadge(); updateStatsStrip(); renderBookmarks(); toast('Dihapus'); }
function goToBm(num){ closeModal('bookmarkModal'); loadSurah(num); }

// ════════════════════════════════════════
// COPY & SHARE
// ════════════════════════════════════════
function copyAyah(idx){
  const s=currentSurah; const ayah=s.arabic.ayahs[idx];
  navigator.clipboard.writeText(`${ayah.text}\n\n${s.translation.ayahs[idx].text}\n\n— ${s.arabic.englishName} [${ayah.numberInSurah}]`).then(()=>toast('<i class="fas fa-check-circle"></i> Disalin!')).catch(()=>toast('Gagal menyalin'));
}
function openShare(idx){
  shareAyah={ idx, surahName:currentSurah.arabic.englishName, arabic:currentSurah.arabic.ayahs[idx].text, trans:currentSurah.translation.ayahs[idx].text, ref:`${currentSurah.arabic.englishName} [${currentSurah.arabic.ayahs[idx].numberInSurah}]` };
  renderShare();
  openModal('shareModal');
}
function renderShare(){
  if(!shareAyah) return;
  const s=shareAyah;
  document.getElementById('shareContent').innerHTML=`
    <div class="share-preview" id="shareCard">
      <div class="sp-arabic">${s.arabic}</div>
      <div class="sp-trans">${s.trans}</div>
      <div class="sp-ref">${s.ref}</div>
    </div>
    <button class="share-download" onclick="downloadShareImg()">⬇ Unduh Gambar</button>
    <div style="margin-top:0.8rem;display:flex;gap:0.5rem">
      <button class="abtn" style="flex:1" onclick="copyAyahShare()"><i class="far fa-copy"></i> Salin Teks</button>
    </div>`;
}
function copyAyahShare(){ if(shareAyah) navigator.clipboard.writeText(`${shareAyah.arabic}\n\n${shareAyah.trans}\n\n— ${shareAyah.ref}`).then(()=>toast('<i class="fas fa-check-circle"></i> Disalin!')); }
function downloadShareImg(){
  toast('<i class="fas fa-lightbulb"></i> Screenshot atau gunakan browser print ke PDF untuk menyimpan');
}

// ════════════════════════════════════════
// LAST READ & RESUME
// ════════════════════════════════════════
function updateResumeBanner(){
  const card=document.getElementById('resumeCard');
  if(!S.lastRead){ card.classList.add('hidden'); return; }
  document.getElementById('resumeName').textContent=S.lastRead.name;
  card.classList.remove('hidden');
}
function resumeReading(){ if(S.lastRead) loadSurah(S.lastRead.num); }

// ════════════════════════════════════════
// STATS
// ════════════════════════════════════════
function checkStreakToday(){
  const today=new Date().toDateString();
  if(S.stats.lastDate!==today){ S.stats.streak=S.stats.lastDate===new Date(Date.now()-86400000).toDateString()?S.stats.streak+1:1; S.stats.lastDate=today; saveStats(); }
}
function updateStatsStrip(){
  document.getElementById('statStreak').innerHTML=S.stats.streak+' <i class="fas fa-fire"></i>';
  document.getElementById('statSurah').textContent=S.stats.surahRead.size;
  document.getElementById('statAyat').textContent=S.stats.totalAyat;
  document.getElementById('statBm').textContent=Object.keys(S.bookmarks).length;
}
function renderStats(){
  const c=document.getElementById('statsContent');
  const pct=Math.round((S.stats.surahRead.size/114)*100);
  c.innerHTML=`
    <div class="stats-grid">
      <div class="stat-box"><div class="stat-box-num">${S.stats.streak}</div><div class="stat-box-label"><i class="fas fa-fire"></i> Streak (Hari)</div></div>
      <div class="stat-box"><div class="stat-box-num">${S.stats.surahRead.size}</div><div class="stat-box-label"><i class="fas fa-book-open"></i> Surah Dibaca</div></div>
      <div class="stat-box"><div class="stat-box-num">${S.stats.totalAyat.toLocaleString()}</div><div class="stat-box-label"><i class="fas fa-scroll"></i> Total Ayat</div></div>
      <div class="stat-box"><div class="stat-box-num">${Object.keys(S.bookmarks).length}</div><div class="stat-box-label"><i class="fas fa-bookmark"></i> Bookmark</div></div>
    </div>
    <div style="margin-top:1rem;background:var(--navy-2);border:1px solid var(--border-subtle);border-radius:var(--radius-sm);padding:1rem">
      <div style="display:flex;justify-content:space-between;font-size:0.82rem;color:var(--cream-muted);margin-bottom:0.5rem"><span>Progress Al-Quran</span><span>${pct}%</span></div>
      <div style="height:6px;background:var(--navy-3);border-radius:3px"><div style="height:100%;width:${pct}%;background:linear-gradient(90deg,var(--emerald-light),var(--gold));border-radius:3px"></div></div>
    </div>`;
}

// ════════════════════════════════════════
// QUIZ
// ════════════════════════════════════════
function initQuizData(){ quizData=quranData.filter(s=>s.numberOfAyahs>=5); }
async function initQuiz(){
  if(!quizData.length&&quranData.length) initQuizData();
  if(!quizData.length){ document.getElementById('quizContent').innerHTML='<div class="empty"><i class="fas fa-brain"></i><p>Data belum siap</p></div>'; return; }
  quizIdx=0; quizScore=0;
  renderQuizQ();
}
async function renderQuizQ(){
  const c=document.getElementById('quizContent');
  c.innerHTML='<div class="loader"><i class="fas fa-spinner"></i></div>';
  const surah=quizData[Math.floor(Math.random()*quizData.length)];
  try{
    const r=await fetch(`https://api.alquran.cloud/v1/surah/${surah.number}/editions/ar.alafasy,id.indonesian`);
    const d=await r.json();
    const ayahs=d.data[0].ayahs;
    const qIdx=Math.floor(Math.random()*(ayahs.length-1));
    const correct=ayahs[qIdx+1].text;
    const options=[correct];
    while(options.length<4){
      const rand=ayahs[Math.floor(Math.random()*ayahs.length)].text;
      if(!options.includes(rand)) options.push(rand);
    }
    options.sort(()=>Math.random()-0.5);
    c.innerHTML=`
      <div class="quiz-q">Ayat manakah yang melanjutkan ayat berikut? (${surah.englishName} ${qIdx+1})</div>
      <div class="quiz-arabic">${ayahs[qIdx].text}</div>
      <div class="quiz-options">${options.map(o=>`<div class="quiz-opt" onclick="checkQuiz(this,'${encodeURIComponent(o)}','${encodeURIComponent(correct)}')">${o}</div>`).join('')}</div>
      <div style="text-align:right;font-size:0.78rem;color:var(--cream-muted);margin-top:0.8rem">Skor: ${quizScore} / ${quizIdx}</div>`;
  }catch(e){ c.innerHTML='<div class="empty"><i class="fas fa-wifi-slash"></i><p>Gagal memuat soal</p></div>'; }
}
function checkQuiz(el,chosen,correct){
  const ch=decodeURIComponent(chosen), co=decodeURIComponent(correct);
  document.querySelectorAll('.quiz-opt').forEach(o=>{ o.onclick=null; if(o.textContent===co) o.classList.add('correct'); });
  if(ch===co){ el.classList.add('correct'); quizScore++; toast('<i class="fas fa-check-circle"></i> Benar!'); }
  else{ el.classList.add('wrong'); toast('<i class="fas fa-times-circle"></i> Salah'); }
  quizIdx++;
  setTimeout(()=>renderQuizQ(),1800);
}

// ════════════════════════════════════════
// DZIKIR
// ════════════════════════════════════════
const DZIKIR_LIST=[
  {name:'Subhanallah',arabic:'سُبْحَانَ اللَّهِ',latin:'Subhanallah',target:33},
  {name:'Alhamdulillah',arabic:'الْحَمْدُ لِلَّهِ',latin:'Alhamdulillah',target:33},
  {name:'Allahu Akbar',arabic:'اللَّهُ أَكْبَرُ',latin:'Allahu Akbar',target:34},
  {name:'Laa Ilaaha',arabic:'لَا إِلَهَ إِلَّا اللَّهُ',latin:'Laa ilaaha illallaah',target:100},
  {name:'Istighfar',arabic:'أَسْتَغْفِرُ اللَّهَ',latin:'Astaghfirullah',target:100},
  {name:'Sholawat',arabic:'اللَّهُمَّ صَلِّ عَلَى مُحَمَّدٍ',latin:'Allahumma shalli ala Muhammad',target:100},
];
function initDzikir(){ S.dzikirState={...DZIKIR_LIST[0],count:0}; }
function renderDzikir(){
  const c=document.getElementById('dzikirContent');
  const dz=S.dzikirState;
  const pct=Math.min((dz.count/dz.target)*100,100);
  const conic=`conic-gradient(var(--emerald) ${pct*3.6}deg, var(--navy-3) ${pct*3.6}deg)`;
  c.innerHTML=`
    <div class="dzikir-section">
      <div class="dzikir-name">${dz.arabic}</div>
      <div class="dzikir-latin">${dz.latin}</div>
      <div class="dzikir-counter-display" style="background:${conic}">
        <div>
          <span class="dzikir-num">${dz.count}</span>
          <span class="dzikir-target">/ ${dz.target}</span>
        </div>
      </div>
      <button class="dzikir-tap" onclick="tapDzikir()">+</button>
      ${dz.count>=dz.target?`<div style="color:var(--emerald-light);font-size:0.85rem;margin-bottom:1rem"><i class="fas fa-check-circle"></i> Selesai! Alhamdulillah</div>`:''}
      <button class="abtn" onclick="resetDzikir()" style="margin:0 auto 1rem">↺ Reset</button>
    </div>
    <div class="dzikir-list">${DZIKIR_LIST.map((d,i)=>`
      <div class="dzikir-item ${d.name===dz.name?'active-dzikir':''}" onclick="selectDzikir(${i})">
        <div class="dzikir-item-arab">${d.arabic}</div>
        <div class="dzikir-item-name">${d.name} (${d.target}x)</div>
      </div>`).join('')}</div>`;
}
function tapDzikir(){
  if(S.dzikirState.count<S.dzikirState.target) S.dzikirState.count++;
  if(S.dzikirState.count===S.dzikirState.target) toast('<i class="fas fa-check-circle"></i> '+S.dzikirState.name+' selesai!');
  renderDzikir();
}
function resetDzikir(){ S.dzikirState.count=0; renderDzikir(); }
function selectDzikir(i){ S.dzikirState={...DZIKIR_LIST[i],count:0}; renderDzikir(); }

// ════════════════════════════════════════
// DOA HARIAN
// ════════════════════════════════════════
const DOA_LIST=[
  {name:'Doa Makan',arabic:'بِسْمِ اللَّهِ وَعَلَى بَرَكَةِ اللَّهِ',latin:'Bismillaahi wa \'alaa barakatillaah',arti:'Dengan nama Allah dan atas berkah Allah'},
  {name:'Doa Setelah Makan',arabic:'الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا وَجَعَلَنَا مُسْلِمِينَ',latin:'Alhamdulillaahil ladzii ath\'amanaa wa saqaanaa wa ja\'alanaa muslimiin',arti:'Segala puji bagi Allah yang telah memberi makan dan minum kami dan menjadikan kami muslim'},
  {name:'Doa Tidur',arabic:'بِاسْمِكَ اللَّهُمَّ أَحْيَا وَأَمُوتُ',latin:'Bismika Allahumma ahyaa wa amuut',arti:'Dengan nama-Mu ya Allah, aku hidup dan aku mati'},
  {name:'Doa Bangun Tidur',arabic:'الْحَمْدُ لِلَّهِ الَّذِي أَحْيَانَا بَعْدَ مَا أَمَاتَنَا وَإِلَيْهِ النُّشُورُ',latin:'Alhamdulillahil ladzii ahyaanaa ba\'da maa amaatanaa wa ilaihin nusyuur',arti:'Segala puji bagi Allah yang menghidupkan kami setelah mematikan kami dan kepada-Nya lah kami dibangkitkan'},
  {name:'Doa Keluar Rumah',arabic:'بِسْمِ اللَّهِ تَوَكَّلْتُ عَلَى اللَّهِ',latin:'Bismillaahi tawakkaltu \'alallaah',arti:'Dengan nama Allah, aku bertawakal kepada Allah'},
  {name:'Doa Masuk Rumah',arabic:'اللَّهُمَّ إِنِّي أَسْأَلُكَ خَيْرَ الْمَوْلِجِ وَخَيْرَ الْمَخْرَجِ',latin:'Allahumma innii as-aluka khoirol maulaji wa khoirol makhroj',arti:'Ya Allah, aku memohon kepada-Mu sebaik-baiknya tempat masuk dan tempat keluar'},
  {name:'Doa Naik Kendaraan',arabic:'سُبْحَانَ الَّذِي سَخَّرَ لَنَا هَذَا',latin:'Subhaanal ladzii sakhkhara lanaa hadzaa',arti:'Maha Suci Allah yang telah menundukkan semua ini bagi kami'},
  {name:'Doa Masuk Masjid',arabic:'اللَّهُمَّ افْتَحْ لِي أَبْوَابَ رَحْمَتِكَ',latin:'Allahummaf-tah lii abwaaba rahmatik',arti:'Ya Allah, bukakanlah untukku pintu-pintu rahmat-Mu'},
  {name:'Doa Masuk WC',arabic:'اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْخُبُثِ وَالْخَبَائِثِ',latin:'Allahumma innii a\'uudzubika minal khubutsi wal khabaa-its',arti:'Ya Allah, aku berlindung kepada-Mu dari setan laki-laki dan setan perempuan'},
  {name:'Doa Bercermin',arabic:'اللَّهُمَّ أَنْتَ حَسَّنْتَ خَلْقِي فَحَسِّنْ خُلُقِي',latin:'Allahumma anta hassanta khalqii fa-hassin khuluqii',arti:'Ya Allah, Engkau telah membaguskan kejadianku, maka baguskanlah akhlakku'},
];
function initDoa(){}
function renderDoa(){
  document.getElementById('doaContent').innerHTML=DOA_LIST.map(d=>`
    <div style="background:var(--navy-2);border:1px solid var(--border-subtle);border-radius:var(--radius-sm);padding:1.1rem;margin-bottom:0.7rem">
      <div style="font-size:0.7rem;text-transform:uppercase;letter-spacing:0.08em;color:var(--gold);margin-bottom:0.5rem">${d.name}</div>
      <div style="font-family:var(--font-arabic);font-size:1.4rem;text-align:right;direction:rtl;color:var(--cream);margin-bottom:0.5rem;line-height:2">${d.arabic}</div>
      <div style="font-size:0.78rem;color:var(--cream-muted);margin-bottom:0.4rem;font-style:italic">${d.latin}</div>
      <div style="font-size:0.82rem;color:var(--cream-dim)">${d.arti}</div>
    </div>`).join('');
}

// ════════════════════════════════════════
// AUDIO
// ════════════════════════════════════════
function playAyah(idx){
  currentAyahIdx=idx;
  const s=currentSurah.arabic, ayah=s.ayahs[idx];
  const audio=document.getElementById('qaudio');
  const url=`https://cdn.islamic.network/quran/audio-surah/128/${S.settings.qari}/${s.number}.mp3`;
  if(audio.dataset.src!==url){ audio.src=url; audio.dataset.src=url; }
  audio.play(); audioPlaying=true;
  document.getElementById('audioBar').classList.add('show');
  document.getElementById('audioTitle').textContent=`${s.englishName} · Ayat ${ayah.numberInSurah}`;
  document.getElementById('audioSub').textContent=s.englishNameTranslation;
  document.getElementById('playBtn').innerHTML='<i class="fas fa-pause"></i>';
  document.querySelectorAll('.ayah-card').forEach(c=>c.classList.remove('active-play'));
  document.getElementById('ac-'+idx)?.classList.add('active-play');
  document.getElementById('ac-'+idx)?.scrollIntoView({behavior:'smooth',block:'center'});
  if(S.lastRead){ S.lastRead.ayah=idx; sv('lastRead',S.lastRead); }
}
function togglePlay(){
  const a=document.getElementById('qaudio');
  if(audioPlaying){ a.pause(); document.getElementById('playBtn').innerHTML='<i class="fas fa-play"></i>'; audioPlaying=false; }
  else{ a.play(); document.getElementById('playBtn').innerHTML='<i class="fas fa-pause"></i>'; audioPlaying=true; }
}
function updateAudioProg(){
  const a=document.getElementById('qaudio');
  if(a.duration) document.getElementById('audioProg').style.width=(a.currentTime/a.duration*100)+'%';
}
function seekAudio(e){
  const a=document.getElementById('qaudio');
  const bar=document.getElementById('audioProg').parentElement;
  a.currentTime=(e.offsetX/bar.offsetWidth)*a.duration;
}
function nextAyah(){ if(currentSurah&&currentAyahIdx<currentSurah.arabic.ayahs.length-1) playAyah(currentAyahIdx+1); }
function prevAyah(){ if(currentAyahIdx>0) playAyah(currentAyahIdx-1); }
function closeAudio(){
  document.getElementById('qaudio').pause();
  document.getElementById('audioBar').classList.remove('show');
  document.querySelectorAll('.ayah-card').forEach(c=>c.classList.remove('active-play'));
  audioPlaying=false;
}

// ════════════════════════════════════════
// VIEW HELPERS
// ════════════════════════════════════════
function showAyahView(){
  document.getElementById('juzSection').style.display='none';
  document.getElementById('surahSection').style.display='none';
  document.getElementById('searchWrap').style.display='none';
  document.getElementById('statsStrip').style.display='none';
  document.getElementById('resumeCard').classList.add('hidden');
  document.getElementById('ayahView').classList.add('active');
  document.getElementById('navHome').classList.remove('active');
}
function backToList(){
  document.getElementById('ayahView').classList.remove('active');
  document.getElementById('juzSection').style.display='block';
  document.getElementById('surahSection').style.display='block';
  document.getElementById('searchWrap').style.display='block';
  document.getElementById('statsStrip').style.display='grid';
  updateResumeBanner();
  renderSurahList(quranData);
  closeAudio();
  document.getElementById('navHome').classList.add('active');
}
function goHome(){
  if(document.getElementById('ayahView').classList.contains('active')) backToList();
}

// ════════════════════════════════════════
// READING PROGRESS BAR
// ════════════════════════════════════════
function updateReadingBar(){
  if(!document.getElementById('ayahView').classList.contains('active')){ document.getElementById('readingBar').style.width='0'; return; }
  const h=document.documentElement;
  const pct=(h.scrollTop/(h.scrollHeight-h.clientHeight))*100;
  document.getElementById('readingBar').style.width=pct+'%';
}

// ════════════════════════════════════════
// TOAST
// ════════════════════════════════════════
function toast(msg){
  const t=document.getElementById('toast');
  t.innerHTML=msg;
  t.classList.add('show');
  clearTimeout(t._t);
  t._t=setTimeout(()=>t.classList.remove('show'),2200);
}

// ════════════════════════════════════════
// FALLBACK DATA
// ════════════════════════════════════════
function loadFallback(){
  const d=[[1,'Al-Faatiha','The Opening',7,'Meccan','سُورَةُ ٱلْفَاتِحَةِ'],[2,'Al-Baqara','The Cow',286,'Medinan','سُورَةُ ٱلْبَقَرَةِ'],[3,'Aal-i-Imraan','The Family of Imraan',200,'Medinan','سُورَةُ آلِ عِمۡرَانَ'],[4,'An-Nisaa','The Women',176,'Medinan','سُورَةُ ٱلنِّسَاءِ'],[5,'Al-Maaida','The Table',120,'Medinan','سُورَةُ ٱلْمَائِدَةِ'],[6,'Al-Anaam','The Cattle',165,'Meccan','سُورَةُ ٱلْأَنْعَامِ'],[7,'Al-Araaf','The Heights',206,'Meccan','سُورَةُ ٱلْأَعۡرَافِ'],[8,'Al-Anfal','The Spoils of War',75,'Medinan','سُورَةُ ٱلْأَنفَالِ'],[9,'At-Tawba','The Repentance',129,'Medinan','سُورَةُ ٱلتَّوۡبَةِ'],[10,'Yunus','Jonah',109,'Meccan','سُورَةُ يُونُسَ'],[11,'Hud','Hud',123,'Meccan','سُورَةُ هُودٍ'],[12,'Yusuf','Joseph',111,'Meccan','سُورَةُ يُوسُفَ'],[13,'Ar-Rad','The Thunder',43,'Medinan','سُورَةُ ٱلرَّعۡدِ'],[14,'Ibrahim','Abraham',52,'Meccan','سُورَةُ إِبۡرَاهِيمَ'],[15,'Al-Hijr','The Rocky Tract',99,'Meccan','سُورَةُ ٱلْحِجۡرِ'],[16,'An-Nahl','The Bee',128,'Meccan','سُورَةُ ٱلنَّحۡلِ'],[17,'Al-Isra','The Night Journey',111,'Meccan','سُورَةُ ٱلْإِسۡرَاءِ'],[18,'Al-Kahf','The Cave',110,'Meccan','سُورَةُ ٱلْكَهۡفِ'],[19,'Maryam','Mary',98,'Meccan','سُورَةُ مَرۡيَمَ'],[20,'Ta-Ha','Ta-Ha',135,'Meccan','سُورَةُ طٰهٰ'],[21,'Al-Anbiyaa','The Prophets',112,'Meccan','سُورَةُ ٱلْأَنبِيَاءِ'],[22,'Al-Hajj','The Pilgrimage',78,'Medinan','سُورَةُ ٱلْحَجِّ'],[23,'Al-Muminoon','The Believers',118,'Meccan','سُورَةُ ٱلْمُؤۡمِنُونَ'],[24,'An-Noor','The Light',64,'Medinan','سُورَةُ ٱلنُّورِ'],[25,'Al-Furqaan','The Criterion',77,'Meccan','سُورَةُ ٱلْفُرۡقَانِ'],[26,'Ash-Shuaraa','The Poets',227,'Meccan','سُورَةُ ٱلشُّعَرَاءِ'],[27,'An-Naml','The Ant',93,'Meccan','سُورَةُ ٱلنَّمۡلِ'],[28,'Al-Qasas','The Stories',88,'Meccan','سُورَةُ ٱلْقَصَصِ'],[29,'Al-Ankaboot','The Spider',69,'Meccan','سُورَةُ ٱلْعَنكَبُوتِ'],[30,'Ar-Room','The Romans',60,'Meccan','سُورَةُ ٱلرُّومِ'],[31,'Luqman','Luqman',34,'Meccan','سُورَةُ لُقۡمَانَ'],[32,'As-Sajda','The Prostration',30,'Meccan','سُورَةُ ٱلسَّجۡدَةِ'],[33,'Al-Ahzab','The Clans',73,'Medinan','سُورَةُ ٱلْأَحۡزَابِ'],[34,'Saba','Sheba',54,'Meccan','سُورَةُ سَبَإٍ'],[35,'Faatir','The Originator',45,'Meccan','سُورَةُ فَاطِرٍ'],[36,'Ya-Sin','Ya Sin',83,'Meccan','سُورَةُ يسٓ'],[37,'As-Saaffaat','Those Who Set The Ranks',182,'Meccan','سُورَةُ ٱلصَّافَّاتِ'],[38,'Saad','The Letter Saad',88,'Meccan','سُورَةُ صٓ'],[39,'Az-Zumar','The Troops',75,'Meccan','سُورَةُ ٱلزُّمَرِ'],[40,'Ghafir','The Forgiver',85,'Meccan','سُورَةُ غَافِرٍ'],[41,'Fussilat','Explained In Detail',54,'Meccan','سُورَةُ فُصِّلَتۡ'],[42,'Ash-Shura','The Consultation',53,'Meccan','سُورَةُ ٱلشُّورَىٰ'],[43,'Az-Zukhruf','The Ornaments of Gold',89,'Meccan','سُورَةُ ٱلزُّخۡرُفِ'],[44,'Ad-Dukhaan','The Smoke',59,'Meccan','سُورَةُ ٱلدُّخَانِ'],[45,'Al-Jaathiya','The Crouching',37,'Meccan','سُورَةُ ٱلْجَاثِيَةِ'],[46,'Al-Ahqaf','The Wind-Curved Sandhills',35,'Meccan','سُورَةُ ٱلْأَحۡقَافِ'],[47,'Muhammad','Muhammad',38,'Medinan','سُورَةُ مُحَمَّدٍ'],[48,'Al-Fath','The Victory',29,'Medinan','سُورَةُ ٱلْفَتۡحِ'],[49,'Al-Hujuraat','The Rooms',18,'Medinan','سُورَةُ ٱلْحُجُرَاتِ'],[50,'Qaaf','The Letter Qaaf',45,'Meccan','سُورَةُ قٓ'],[51,'Adh-Dhaariyaat','The Winnowing Winds',60,'Meccan','سُورَةُ ٱلذَّارِيَاتِ'],[52,'At-Tur','The Mount',49,'Meccan','سُورَةُ ٱلطُّورِ'],[53,'An-Najm','The Star',62,'Meccan','سُورَةُ ٱلنَّجۡمِ'],[54,'Al-Qamar','The Moon',55,'Meccan','سُورَةُ ٱلْقَمَرِ'],[55,'Ar-Rahman','The Beneficent',78,'Medinan','سُورَةُ ٱلرَّحۡمَٰنِ'],[56,'Al-Waaqia','The Inevitable',96,'Meccan','سُورَةُ ٱلْوَاقِعَةِ'],[57,'Al-Hadid','The Iron',29,'Medinan','سُورَةُ ٱلْحَدِيدِ'],[58,'Al-Mujadila','The Pleading Woman',22,'Medinan','سُورَةُ ٱلْمُجَادِلَةِ'],[59,'Al-Hashr','The Exile',24,'Medinan','سُورَةُ ٱلْحَشۡرِ'],[60,'Al-Mumtahina','She That Is To Be Examined',13,'Medinan','سُورَةُ ٱلْمُمۡتَحَنَةِ'],[61,'As-Saff','The Ranks',14,'Medinan','سُورَةُ ٱلصَّفِّ'],[62,'Al-Jumuah','The Congregation',11,'Medinan','سُورَةُ ٱلْجُمُعَةِ'],[63,'Al-Munafiqoon','The Hypocrites',11,'Medinan','سُورَةُ ٱلْمُنَافِقُونَ'],[64,'At-Taghabun','The Mutual Disillusion',18,'Medinan','سُورَةُ ٱلتَّغَابُنِ'],[65,'At-Talaq','The Divorce',12,'Medinan','سُورَةُ ٱلطَّلَاقِ'],[66,'At-Tahrim','The Prohibition',12,'Medinan','سُورَةُ ٱلتَّحۡرِيمِ'],[67,'Al-Mulk','The Sovereignty',30,'Meccan','سُورَةُ ٱلْمُلۡكِ'],[68,'Al-Qalam','The Pen',52,'Meccan','سُورَةُ ٱلْقَلَمِ'],[69,'Al-Haaqqa','The Reality',52,'Meccan','سُورَةُ ٱلْحَاقَّةِ'],[70,'Al-Maarij','The Ascending Stairways',44,'Meccan','سُورَةُ ٱلْمَعَارِجِ'],[71,'Nooh','Noah',28,'Meccan','سُورَةُ نُوحٍ'],[72,'Al-Jinn','The Jinn',28,'Meccan','سُورَةُ ٱلْجِنِّ'],[73,'Al-Muzzammil','The Enshrouded One',20,'Meccan','سُورَةُ ٱلْمُزَّمِّلِ'],[74,'Al-Muddaththir','The Cloaked One',56,'Meccan','سُورَةُ ٱلْمُدَّثِّرِ'],[75,'Al-Qiyaama','The Resurrection',40,'Meccan','سُورَةُ ٱلْقِيَامَةِ'],[76,'Al-Insaan','Man',31,'Medinan','سُورَةُ ٱلْإِنسَانِ'],[77,'Al-Mursalaat','The Emissaries',50,'Meccan','سُورَةُ ٱلْمُرۡسَلَاتِ'],[78,'An-Naba','The Tidings',40,'Meccan','سُورَةُ ٱلنَّبَإِ'],[79,'An-Naaziat','Those Who Drag Forth',46,'Meccan','سُورَةُ ٱلنَّازِعَاتِ'],[80,'Abasa','He Frowned',42,'Meccan','سُورَةُ عَبَسَ'],[81,'At-Takwir','The Overthrowing',29,'Meccan','سُورَةُ ٱلتَّكۡوِيرِ'],[82,'Al-Infitaar','The Cleaving',19,'Meccan','سُورَةُ ٱلْإِنفِطَارِ'],[83,'Al-Mutaffifin','The Defrauding',36,'Meccan','سُورَةُ ٱلْمُطَفِّفِينَ'],[84,'Al-Inshiqaaq','The Sundering',25,'Meccan','سُورَةُ ٱلْإِنشِقَاقِ'],[85,'Al-Burooj','The Mansions of the Stars',22,'Meccan','سُورَةُ ٱلْبُرُوجِ'],[86,'At-Taariq','The Morning Star',17,'Meccan','سُورَةُ ٱلطَّارِقِ'],[87,'Al-Ala','The Most High',19,'Meccan','سُورَةُ ٱلْأَعۡلَىٰ'],[88,'Al-Ghashiya','The Overwhelming',26,'Meccan','سُورَةُ ٱلْغَاشِيَةِ'],[89,'Al-Fajr','The Dawn',30,'Meccan','سُورَةُ ٱلْفَجۡرِ'],[90,'Al-Balad','The City',20,'Meccan','سُورَةُ ٱلْبَلَدِ'],[91,'Ash-Shams','The Sun',15,'Meccan','سُورَةُ ٱلشَّمۡسِ'],[92,'Al-Lail','The Night',21,'Meccan','سُورَةُ ٱللَّيۡلِ'],[93,'Ad-Dhuhaa','The Morning Hours',11,'Meccan','سُورَةُ ٱلضُّحَىٰ'],[94,'Ash-Sharh','The Relief',8,'Meccan','سُورَةُ ٱلشَّرۡحِ'],[95,'At-Tin','The Fig',8,'Meccan','سُورَةُ ٱلتِّينِ'],[96,'Al-Alaq','The Clot',19,'Meccan','سُورَةُ ٱلْعَلَقِ'],[97,'Al-Qadr','The Power',5,'Meccan','سُورَةُ ٱلْقَدۡرِ'],[98,'Al-Bayyina','The Clear Proof',8,'Medinan','سُورَةُ ٱلْبَيِّنَةِ'],[99,'Az-Zalzala','The Earthquake',8,'Medinan','سُورَةُ ٱلزَّلۡزَلَةِ'],[100,'Al-Aadiyaat','The Courser',11,'Meccan','سُورَةُ ٱلْعَادِيَاتِ'],[101,'Al-Qaaria','The Calamity',11,'Meccan','سُورَةُ ٱلْقَارِعَةِ'],[102,'At-Takaathur','Rivalry in World Increase',8,'Meccan','سُورَةُ ٱلتَّكَاثُرِ'],[103,'Al-Asr','The Declining Day',3,'Meccan','سُورَةُ ٱلْعَصۡرِ'],[104,'Al-Humaza','The Traducer',9,'Meccan','سُورَةُ ٱلْهُمَزَةِ'],[105,'Al-Fil','The Elephant',5,'Meccan','سُورَةُ ٱلْفِيلِ'],[106,'Quraish','Quraysh',4,'Meccan','سُورَةُ قُرَيۡشٍ'],[107,'Al-Maaun','The Small Kindnesses',7,'Meccan','سُورَةُ ٱلْمَاعُونِ'],[108,'Al-Kawthar','A River in Paradise',3,'Meccan','سُورَةُ ٱلْكَوۡثَرِ'],[109,'Al-Kaafiroon','The Disbelievers',6,'Meccan','سُورَةُ ٱلْكَافِرُونَ'],[110,'An-Nasr','The Divine Support',3,'Medinan','سُورَةُ ٱلنَّصۡرِ'],[111,'Al-Masad','The Palm Fibre',5,'Meccan','سُورَةُ ٱلْمَسَدِ'],[112,'Al-Ikhlaas','Sincerity',4,'Meccan','سُورَةُ ٱلْإِخۡلَاصِ'],[113,'Al-Falaq','The Daybreak',5,'Meccan','سُورَةُ ٱلْفَلَقِ'],[114,'An-Naas','Mankind',6,'Meccan','سُورَةُ ٱلنَّاسِ']];
  quranData=d.map(x=>({number:x[0],englishName:x[1],englishNameTranslation:x[2],numberOfAyahs:x[3],revelationType:x[4],name:x[5]}));
  renderSurahList(quranData);
  initQuizData();
}
</script>
</body>
</html>